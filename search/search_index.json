{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PC Magik Docs","text":""},{"location":"#pc-magik-docs","title":"PC Magik Docs","text":"<p>Technical guides for Linux, Docker, Kubernetes, and homelab infrastructure.</p> <ul> <li> <p> Linux</p> <p>System administration, SSH keys, user management, and VPS setup.</p> <p> Explore</p> </li> <li> <p> Containers</p> <p>Docker installation, configuration, Swarm orchestration, and Kubernetes.</p> <p> Explore</p> </li> <li> <p> Infrastructure</p> <p>Proxmox virtualization, Cloud-Init provisioning, and GPU workloads.</p> <p> Explore</p> </li> <li> <p> DevOps</p> <p>Terraform, Ansible, Packer, and Jenkins CI/CD pipelines.</p> <p> Explore</p> </li> <li> <p> Security</p> <p>CrowdSec intrusion prevention and Tailscale VPN mesh networking.</p> <p> Explore</p> </li> <li> <p> Support</p> <p>Find this project useful? Consider supporting its development.</p> <p> Learn more</p> </li> </ul>"},{"location":"about/","title":"About Me","text":""},{"location":"about/#about-me","title":"About Me","text":"<p>I am an experienced IT specialist with a passion for everything related to Linux, automation, and DevOps. Over the last twelve years, I've developed skills that have allowed me to design, implement, and manage technologically advanced infrastructures.</p>"},{"location":"about/#professional-experience","title":"Professional Experience","text":"<p>My journey to becoming a DevOps specialist has been filled with intense, self-planned weeks of learning and practice. Starting with the fundamentals of DevOps and Git, I solidified my knowledge of continuous integration and code versioning. I immersed myself in the world of containerization, mastering Docker and Docker Compose, which are essential for creating flexible and scalable environments.</p>"},{"location":"about/#ai-and-no-code-automation","title":"AI and No-Code Automation","text":""},{"location":"about/#artificial-intelligence-and-large-language-models","title":"Artificial Intelligence and Large Language Models","text":"<p>Proficient in leveraging AI and LLM technologies to enhance business processes and decision-making. Actively using these models for a variety of applications from work automation to personal assistance.</p>"},{"location":"about/#no-code-automation","title":"No-Code Automation","text":"<p>Skilled in utilizing no-code platforms like Make (formerly Integromat) to automate workflows and integrate services seamlessly without traditional coding. This approach has significantly improved efficiency and allowed for creative solutions in project management and daily tasks. </p>"},{"location":"setup_ansible/","title":"Ansible","text":"","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#ansible-setup-guide","title":"Ansible Setup Guide","text":"<p>A guide for installing Ansible and getting started with infrastructure automation.</p>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#installation","title":"Installation","text":"","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#ubuntu","title":"Ubuntu","text":"<pre><code>sudo apt update\nsudo apt install software-properties-common\nsudo add-apt-repository --yes --update ppa:ansible/ansible\nsudo apt install ansible\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#rhel-almalinux-centos","title":"RHEL / AlmaLinux / CentOS","text":"<pre><code>sudo dnf update -y\nsudo dnf install -y epel-release\nsudo dnf install ansible -y\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#verify-installation","title":"Verify Installation","text":"<pre><code>ansible --version\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#inventory-configuration","title":"Inventory Configuration","text":"<p>The inventory file defines the hosts Ansible manages.</p>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#default-location","title":"Default Location","text":"<pre><code>/etc/ansible/hosts\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#example-inventory","title":"Example Inventory","text":"<pre><code>[webservers]\nserver1 ansible_host=10.0.0.11\nserver2 ansible_host=10.0.0.12\nserver3 ansible_host=10.0.0.13\n\n[dbservers]\ndb1 ansible_host=10.0.0.21\n\n[all:vars]\nansible_python_interpreter=/usr/bin/python3\nansible_user=your_username\nansible_ssh_private_key_file=~/.ssh/my-server-key\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#verify-inventory","title":"Verify Inventory","text":"<pre><code>ansible-inventory --list -y\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#ad-hoc-commands","title":"Ad-Hoc Commands","text":"<p>Quick commands without writing a playbook.</p>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#ping-all-hosts","title":"Ping All Hosts","text":"<pre><code>ansible all -m ping\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#run-a-shell-command","title":"Run a Shell Command","text":"<pre><code>ansible all -a \"df -h\"\nansible all -a \"uptime\"\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#install-a-package","title":"Install a Package","text":"<pre><code># On Debian/Ubuntu hosts\nansible webservers -m apt -a \"name=vim state=latest\" --become\n\n# On RHEL/CentOS hosts\nansible dbservers -m dnf -a \"name=vim state=latest\" --become\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#target-specific-hosts-or-groups","title":"Target Specific Hosts or Groups","text":"<pre><code># Target a group\nansible webservers -m ping\n\n# Target specific hosts\nansible server1:server2 -m ping\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#playbook-basics","title":"Playbook Basics","text":"<p>Playbooks are YAML files defining automation tasks.</p>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#example-install-docker","title":"Example: Install Docker","text":"<pre><code># install-docker.yml\n---\n- name: Install Docker on Ubuntu servers\n  hosts: webservers\n  become: true\n\n  tasks:\n    - name: Install prerequisites\n      apt:\n        name:\n          - apt-transport-https\n          - ca-certificates\n          - curl\n          - software-properties-common\n        state: present\n        update_cache: true\n\n    - name: Add Docker GPG key\n      apt_key:\n        url: https://download.docker.com/linux/ubuntu/gpg\n        state: present\n\n    - name: Add Docker repository\n      apt_repository:\n        repo: \"deb https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable\"\n        state: present\n\n    - name: Install Docker\n      apt:\n        name: docker-ce\n        state: present\n        update_cache: true\n\n    - name: Start and enable Docker\n      systemd:\n        name: docker\n        state: started\n        enabled: true\n\n    - name: Add user to docker group\n      user:\n        name: \"{{ ansible_user }}\"\n        groups: docker\n        append: true\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#run-a-playbook","title":"Run a Playbook","text":"<pre><code>ansible-playbook install-docker.yml\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#dry-run-check-mode","title":"Dry Run (Check Mode)","text":"<pre><code>ansible-playbook install-docker.yml --check\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#verbose-output","title":"Verbose Output","text":"<pre><code>ansible-playbook install-docker.yml -v    # basic\nansible-playbook install-docker.yml -vvv  # detailed\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#ansible-docker-integration","title":"Ansible + Docker Integration","text":"","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#run-containers-via-ansible","title":"Run Containers via Ansible","text":"<pre><code>- name: Run Nginx container\n  community.docker.docker_container:\n    name: nginx\n    image: nginx:latest\n    state: started\n    ports:\n      - \"80:80\"\n    restart_policy: unless-stopped\n</code></pre> <p>Note: Requires the <code>community.docker</code> collection: </p><pre><code>ansible-galaxy collection install community.docker\n</code></pre><p></p>","tags":["DevOps","Ansible"]},{"location":"setup_ansible/#useful-commands","title":"Useful Commands","text":"<pre><code># List all hosts\nansible all --list-hosts\n\n# Test connectivity\nansible all -m ping\n\n# Gather facts about hosts\nansible all -m setup\n\n# Run playbook with specific inventory\nansible-playbook -i inventory.ini playbook.yml\n\n# Limit to specific hosts\nansible-playbook playbook.yml --limit server1\n</code></pre>","tags":["DevOps","Ansible"]},{"location":"setup_cloud/","title":"Cloud-Init","text":"","tags":["Cloud"]},{"location":"setup_cloud/#cloud-init-setup-guide","title":"Cloud-Init Setup Guide","text":"<p>A guide for using cloud-init to automate virtual machine provisioning, with focus on Proxmox templates.</p>","tags":["Cloud"]},{"location":"setup_cloud/#what-is-cloud-init","title":"What is Cloud-Init?","text":"<p>Cloud-init is the industry standard for early-stage initialization of virtual machines. It handles:</p> <ul> <li>Setting hostname and timezone</li> <li>Creating users and SSH keys</li> <li>Installing packages</li> <li>Running custom scripts</li> <li>Network configuration</li> </ul>","tags":["Cloud"]},{"location":"setup_cloud/#cloud-init-config-for-proxmox-vms","title":"Cloud-Init Config for Proxmox VMs","text":"","tags":["Cloud"]},{"location":"setup_cloud/#user-data-example","title":"User Data Example","text":"<pre><code>#cloud-config\n\nhostname: server.example.com\ntimezone: Europe/Warsaw\n\nusers:\n  - name: your_username\n    groups: sudo, docker\n    shell: /bin/bash\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    ssh_authorized_keys:\n      - ssh-rsa AAAA...your_public_key_here\n\npackage_update: true\npackage_upgrade: true\npackages:\n  - curl\n  - wget\n  - git\n  - htop\n  - vim\n  - net-tools\n\nruncmd:\n  - systemctl enable --now qemu-guest-agent\n</code></pre>","tags":["Cloud"]},{"location":"setup_cloud/#cloud-init-with-tailscale","title":"Cloud-Init with Tailscale","text":"<p>Automatically install and configure Tailscale on first boot:</p> <pre><code>#cloud-config\n\nruncmd:\n  # Install Tailscale\n  - ['sh', '-c', 'curl -fsSL https://tailscale.com/install.sh | sh']\n\n  # Enable IP forwarding for exit node\n  - ['sh', '-c', \"echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.d/99-tailscale.conf &amp;&amp; echo 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.d/99-tailscale.conf &amp;&amp; sudo sysctl -p /etc/sysctl.d/99-tailscale.conf\"]\n\n  # Authenticate with auth key (generate at https://login.tailscale.com/admin/settings/keys)\n  - ['tailscale', 'up', '--authkey=your_api_token_here']\n\n  # Optional: Enable Tailscale SSH\n  - ['tailscale', 'set', '--ssh']\n\n  # Optional: Configure as exit node\n  - ['tailscale', 'set', '--advertise-exit-node']\n</code></pre>","tags":["Cloud"]},{"location":"setup_cloud/#proxmox-cloud-init-templates","title":"Proxmox Cloud-Init Templates","text":"","tags":["Cloud"]},{"location":"setup_cloud/#download-cloud-images","title":"Download Cloud Images","text":"<p>Common cloud image sources:</p> Distribution Image URL Ubuntu 24.04 <code>https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img</code> Ubuntu 22.04 <code>https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img</code> Debian 12 <code>https://cdimage.debian.org/cdimage/cloud/bookworm/latest/debian-12-generic-amd64.qcow2</code> AlmaLinux 9 <code>https://repo.almalinux.org/almalinux/9/cloud/x86_64/images/AlmaLinux-9-GenericCloud-latest.x86_64.qcow2</code> Fedora 38 <code>https://download.fedoraproject.org/pub/fedora/linux/releases/38/Cloud/x86_64/images/Fedora-Cloud-Base-38-1.6.x86_64.qcow2</code>","tags":["Cloud"]},{"location":"setup_cloud/#create-a-template","title":"Create a Template","text":"<pre><code># Download image\nwget -O /tmp/ubuntu-24.04.img \\\n  https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img\n\n# Install tools for image customization\napt install libguestfs-tools -y\n\n# Customize image (install qemu-guest-agent)\nvirt-customize -a /tmp/ubuntu-24.04.img \\\n  --install qemu-guest-agent \\\n  --run-command 'systemctl enable qemu-guest-agent'\n\n# Create VM\nqm create 9100 --name ubuntu-24.04-template \\\n  --memory 2048 --cores 2 \\\n  --net0 virtio,bridge=vmbr0\n\n# Import disk\nqm importdisk 9100 /tmp/ubuntu-24.04.img local-lvm\n\n# Attach disk\nqm set 9100 --scsihw virtio-scsi-pci \\\n  --scsi0 local-lvm:vm-9100-disk-0\n\n# Add cloud-init drive\nqm set 9100 --ide2 local-lvm:cloudinit\n\n# Set boot order\nqm set 9100 --boot c --bootdisk scsi0\n\n# Add serial console\nqm set 9100 --serial0 socket --vga serial0\n\n# Resize disk\nqm resize 9100 scsi0 +18G\n\n# Convert to template\nqm template 9100\n</code></pre>","tags":["Cloud"]},{"location":"setup_cloud/#clone-from-template","title":"Clone from Template","text":"<pre><code># Full clone\nqm clone 9100 200 --name my-new-vm --full\n\n# Start the VM\nqm start 200\n</code></pre>","tags":["Cloud"]},{"location":"setup_cloud/#network-configuration-via-cloud-init","title":"Network Configuration via Cloud-Init","text":"","tags":["Cloud"]},{"location":"setup_cloud/#proxmox-gui","title":"Proxmox GUI","text":"<p>In Proxmox web interface: 1. Select VM &gt; Cloud-Init tab 2. Set: User, Password, SSH key, IP config 3. Regenerate Image after changes</p>","tags":["Cloud"]},{"location":"setup_cloud/#cli","title":"CLI","text":"<pre><code># Set cloud-init user and SSH key\nqm set 200 --ciuser your_username\nqm set 200 --sshkeys ~/.ssh/my-server-key.pub\n\n# Set static IP\nqm set 200 --ipconfig0 ip=10.0.0.50/24,gw=10.0.0.1\n\n# Set DNS\nqm set 200 --nameserver 1.1.1.1\nqm set 200 --searchdomain example.com\n</code></pre>","tags":["Cloud"]},{"location":"setup_cloud/#free-tier-options-for-learning","title":"Free-Tier Options for Learning","text":"<p>Several cloud providers offer free tiers suitable for learning cloud-init:</p> <ul> <li>Oracle Cloud - Always Free (ARM instances, 24GB RAM, 4 OCPU)</li> <li>Google Cloud - Free Tier (e2-micro instance)</li> <li>AWS - Free Tier (t2.micro for 12 months)</li> <li>Azure - Free Tier (B1s for 12 months)</li> </ul> <p>All support cloud-init for VM initialization.</p>","tags":["Cloud"]},{"location":"setup_crowdsec/","title":"CrowdSec","text":"","tags":["Security"]},{"location":"setup_crowdsec/#crowdsec-setup-guide","title":"CrowdSec Setup Guide","text":"<p>A guide for installing and configuring CrowdSec as a collaborative intrusion prevention system with firewall bouncer integration.</p>","tags":["Security"]},{"location":"setup_crowdsec/#installation","title":"Installation","text":"","tags":["Security"]},{"location":"setup_crowdsec/#install-crowdsec","title":"Install CrowdSec","text":"<pre><code>curl -s https://install.crowdsec.net | sudo sh\nsudo apt install crowdsec\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#install-firewall-bouncer","title":"Install Firewall Bouncer","text":"<pre><code>sudo apt install crowdsec-firewall-bouncer-iptables\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#start-and-enable-services","title":"Start and Enable Services","text":"<pre><code>sudo systemctl restart crowdsec\nsudo systemctl enable crowdsec\nsudo systemctl start crowdsec-firewall-bouncer\nsudo systemctl enable crowdsec-firewall-bouncer\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#parsers-and-collections","title":"Parsers and Collections","text":"<p>Install parsers to analyze log formats and collections for specific services:</p>","tags":["Security"]},{"location":"setup_crowdsec/#log-parsers","title":"Log Parsers","text":"<pre><code>cscli parsers install crowdsecurity/nginx-logs\ncscli parsers install crowdsecurity/http-logs\ncscli parsers install crowdsecurity/apache2-logs\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#collections","title":"Collections","text":"<pre><code>cscli collections install crowdsecurity/linux\ncscli collections install crowdsecurity/docker\ncscli collections install crowdsecurity/nginx\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#scenarios","title":"Scenarios","text":"<p>Scenarios define attack patterns to detect:</p> <pre><code>cscli scenarios install crowdsecurity/http-crawl-non_statics\ncscli scenarios install crowdsecurity/http-probing\ncscli scenarios install crowdsecurity/http-bad-user-agent\ncscli scenarios install crowdsecurity/http-path-traversal-probing\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#firewall-bouncer-configuration","title":"Firewall Bouncer Configuration","text":"","tags":["Security"]},{"location":"setup_crowdsec/#configuration-file","title":"Configuration File","text":"<p>Location: <code>/etc/crowdsec/bouncers/crowdsec-firewall-bouncer.yaml</code></p> <pre><code>mode: iptables\nupdate_frequency: 10s\nlog_mode: file\nlog_dir: /var/log/\nlog_level: info\nlog_compression: true\nlog_max_size: 100\nlog_max_backups: 3\nlog_max_age: 30\napi_url: http://127.0.0.1:8080/\napi_key: your_api_token_here\ninsecure_skip_verify: false\ndisable_ipv6: false\ndeny_action: DROP\ndeny_log: false\nsupported_decisions_types:\n  - ban\nblacklists_ipv4: crowdsec-blacklists\nblacklists_ipv6: crowdsec6-blacklists\nipset_type: nethash\niptables_chains:\n  - INPUT\n#  - FORWARD\n#  - DOCKER-USER\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#nftables-mode","title":"nftables Mode","text":"<p>If using nftables instead of iptables, set <code>mode: nftables</code> and configure:</p> <pre><code>nftables:\n  ipv4:\n    enabled: true\n    set-only: false\n    table: crowdsec\n    chain: crowdsec-chain\n    priority: -10\n  ipv6:\n    enabled: true\n    set-only: false\n    table: crowdsec6\n    chain: crowdsec6-chain\n    priority: -10\n\nnftables_hooks:\n  - input\n  - forward\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#api-key-management","title":"API Key Management","text":"","tags":["Security"]},{"location":"setup_crowdsec/#generate-a-new-bouncer-key","title":"Generate a New Bouncer Key","text":"<pre><code>sudo cscli bouncers add my-bouncer --output yaml\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#test-api-connection","title":"Test API Connection","text":"<pre><code>curl -H \"X-Api-Key: your_api_token_here\" http://127.0.0.1:8080/v1/alerts\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#regenerate-key-if-needed","title":"Regenerate Key If Needed","text":"<pre><code>sudo cscli bouncers delete my-bouncer\nsudo cscli bouncers add my-bouncer --output yaml\n</code></pre> <p>Update the key in the bouncer YAML and restart:</p> <pre><code>sudo systemctl restart crowdsec-firewall-bouncer\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#monitoring","title":"Monitoring","text":"","tags":["Security"]},{"location":"setup_crowdsec/#view-metrics","title":"View Metrics","text":"<pre><code>cscli metrics\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#list-active-decisions-bans","title":"List Active Decisions (Bans)","text":"<pre><code>cscli decisions list\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#list-alerts","title":"List Alerts","text":"<pre><code>cscli alerts list\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#check-bouncer-status","title":"Check Bouncer Status","text":"<pre><code>sudo systemctl status crowdsec-firewall-bouncer\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#updating","title":"Updating","text":"","tags":["Security"]},{"location":"setup_crowdsec/#update-hub-parsers-scenarios-collections","title":"Update Hub (Parsers, Scenarios, Collections)","text":"<pre><code>cscli hub update\ncscli hub upgrade\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#update-crowdsec","title":"Update CrowdSec","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade crowdsec crowdsec-firewall-bouncer-iptables\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#permissions-setup","title":"Permissions Setup","text":"","tags":["Security"]},{"location":"setup_crowdsec/#add-user-to-crowdsec-group","title":"Add User to CrowdSec Group","text":"<pre><code>sudo groupadd crowdsec 2&gt;/dev/null\nsudo usermod -aG crowdsec $USER\n</code></pre> <p>Note: Log out and back in for group changes to take effect.</p>","tags":["Security"]},{"location":"setup_crowdsec/#passwordless-cscli-via-sudo","title":"Passwordless cscli via Sudo","text":"<pre><code>echo \"$USER ALL=(ALL) NOPASSWD: /usr/bin/cscli\" | sudo tee /etc/sudoers.d/cscli\n</code></pre>","tags":["Security"]},{"location":"setup_crowdsec/#reload-configuration","title":"Reload Configuration","text":"<pre><code>sudo systemctl reload crowdsec\n</code></pre>","tags":["Security"]},{"location":"setup_docker_best_practices/","title":"Best Practices","text":"","tags":["Docker"]},{"location":"setup_docker_best_practices/#docker-best-practices","title":"Docker Best Practices","text":"<p>A collection of best practices for Docker including cleanup, multi-stage builds, non-root containers, security, logging, and monitoring.</p>","tags":["Docker"]},{"location":"setup_docker_best_practices/#docker-cleanup-and-disk-management","title":"Docker Cleanup and Disk Management","text":"","tags":["Docker"]},{"location":"setup_docker_best_practices/#remove-stopped-containers","title":"Remove Stopped Containers","text":"<pre><code>docker container prune\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#remove-unused-images","title":"Remove Unused Images","text":"<pre><code># Dangling images only\ndocker image prune\n\n# All unused images (not referenced by any container)\ndocker image prune -a\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#remove-unused-volumes","title":"Remove Unused Volumes","text":"<pre><code>docker volume prune\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#remove-unused-networks","title":"Remove Unused Networks","text":"<pre><code>docker network prune\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#nuclear-option-remove-everything-unused","title":"Nuclear Option: Remove Everything Unused","text":"<pre><code>docker system prune -a --volumes\n</code></pre> <p>Warning: This removes all stopped containers, unused images, unused volumes, and unused networks. Make sure nothing important is left behind.</p>","tags":["Docker"]},{"location":"setup_docker_best_practices/#check-disk-usage","title":"Check Disk Usage","text":"<pre><code>docker system df\ndocker system df -v  # verbose\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#stop-and-remove-all-containers","title":"Stop and Remove All Containers","text":"<pre><code># Stop all running containers\ndocker container stop $(docker container ls -q)\n\n# Remove all containers (including stopped)\ndocker container rm $(docker container ls -aq) --force\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#multi-stage-builds","title":"Multi-Stage Builds","text":"<p>Multi-stage builds reduce final image size by separating build-time dependencies from runtime.</p>","tags":["Docker"]},{"location":"setup_docker_best_practices/#example-nodejs-application","title":"Example: Node.js Application","text":"<pre><code># Stage 1: Build\nFROM node:20 AS builder\n\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install --only=production\nCOPY . .\nRUN npm run build\n\n# Stage 2: Production\nFROM node:20-slim\n\nRUN groupadd -r appuser &amp;&amp; useradd -r -g appuser appuser\n\nWORKDIR /app\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\n\nRUN chown -R appuser:appuser /app\nUSER appuser\n\nEXPOSE 3000\nCMD [\"node\", \"dist/index.js\"]\n</code></pre> <p>Benefits:</p> <ul> <li>Build tools (compilers, dev dependencies) are not in the final image</li> <li>Smaller image = faster pulls, less storage, smaller attack surface</li> <li>Use <code>slim</code> or <code>alpine</code> base images for further size reduction</li> </ul>","tags":["Docker"]},{"location":"setup_docker_best_practices/#non-root-containers","title":"Non-Root Containers","text":"<p>Running as root inside containers is a security risk. Always run as a non-root user.</p>","tags":["Docker"]},{"location":"setup_docker_best_practices/#in-dockerfile","title":"In Dockerfile","text":"<pre><code>FROM nginx:latest\n\n# Create non-root user\nRUN groupadd -g 1000 appuser &amp;&amp; \\\n    useradd -u 1000 -g appuser -m appuser\n\n# Set ownership\nCOPY --chown=appuser:appuser . /app\n\nUSER appuser\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#in-docker-composeyml","title":"In docker-compose.yml","text":"<pre><code>services:\n  app:\n    image: myapp:latest\n    user: \"1000:1000\"\n    volumes:\n      - ./data:/app/data\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#pre-create-directories-with-correct-ownership","title":"Pre-Create Directories with Correct Ownership","text":"<pre><code>mkdir -p ./data\nchown -R 1000:1000 ./data\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#docker-security-benchmarking","title":"Docker Security Benchmarking","text":"","tags":["Docker"]},{"location":"setup_docker_best_practices/#docker-bench-security","title":"Docker Bench Security","text":"<p>An automated script that checks Docker host and container configurations against CIS benchmarks:</p> <pre><code>git clone https://github.com/docker/docker-bench-security.git\ncd docker-bench-security\n./docker-bench-security.sh\n</code></pre> <p>This checks: - Host configuration - Docker daemon configuration - Docker daemon configuration files - Container images and build files - Container runtime - Docker security operations</p>","tags":["Docker"]},{"location":"setup_docker_best_practices/#log-management","title":"Log Management","text":"","tags":["Docker"]},{"location":"setup_docker_best_practices/#docker-engine-log-locations","title":"Docker Engine Log Locations","text":"Distribution Log Location Ubuntu (systemd) <code>sudo journalctl -fu docker.service</code> Debian <code>/var/log/daemon.log</code> CentOS / RHEL <code>journalctl -u docker.service</code> Fedora / OpenSUSE <code>journalctl -u docker.service</code>","tags":["Docker"]},{"location":"setup_docker_best_practices/#container-logs","title":"Container Logs","text":"<pre><code># View logs\ndocker logs &lt;container_name&gt;\n\n# Follow logs in real time\ndocker logs -f &lt;container_name&gt;\n\n# Last 100 lines\ndocker logs --tail 100 &lt;container_name&gt;\n\n# Logs since a timestamp\ndocker logs --since \"2024-01-01T00:00:00\" &lt;container_name&gt;\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#log-driver-configuration","title":"Log Driver Configuration","text":"<p>Configure log rotation in <code>/etc/docker/daemon.json</code>:</p> <pre><code>{\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\n</code></pre> <pre><code>sudo systemctl restart docker\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#monitoring-tools","title":"Monitoring Tools","text":"","tags":["Docker"]},{"location":"setup_docker_best_practices/#ctop-container-top","title":"ctop (Container Top)","text":"<p>Interactive container metrics viewer:</p> <pre><code># Install via apt\nsudo apt-get install ca-certificates curl gnupg lsb-release\ncurl -fsSL https://azlux.fr/repo.gpg.key | sudo gpg --dearmor -o /usr/share/keyrings/azlux-archive-keyring.gpg\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/azlux-archive-keyring.gpg] http://packages.azlux.fr/debian $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/azlux.list\nsudo apt-get update &amp;&amp; sudo apt-get install docker-ctop\n\n# Or install manually\nsudo wget https://github.com/bcicen/ctop/releases/download/v0.7.7/ctop-0.7.7-linux-amd64 -O /usr/local/bin/ctop\nsudo chmod +x /usr/local/bin/ctop\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#lazydocker","title":"lazydocker","text":"<p>Terminal UI for Docker management:</p> <pre><code>curl https://raw.githubusercontent.com/jesseduffield/lazydocker/master/scripts/install_update_linux.sh | bash\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#docker-stats","title":"docker stats","text":"<p>Built-in resource monitoring:</p> <pre><code>docker stats\ndocker stats --no-stream  # snapshot\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_best_practices/#dns-configuration","title":"DNS Configuration","text":"<p>If containers cannot resolve DNS names, configure Docker DNS:</p> <p>Edit <code>/etc/docker/daemon.json</code>:</p> <pre><code>{\n  \"dns\": [\"1.1.1.1\", \"8.8.8.8\"]\n}\n</code></pre> <pre><code>sudo systemctl restart docker\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_debian/","title":"Docker on Debian","text":"","tags":["Docker"]},{"location":"setup_docker_debian/#install-docker-engine-on-debian","title":"Install Docker Engine on Debian","text":"<p>To get started with Docker Engine on Debian, make sure you meet the prerequisites, and then follow the installation steps.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#prerequisites","title":"Prerequisites","text":"","tags":["Docker"]},{"location":"setup_docker_debian/#firewall-limitations","title":"Firewall Limitations","text":"<p>Warning: Before you install Docker, consider the following security implications and firewall incompatibilities:</p> <ul> <li>If you use <code>ufw</code> or <code>firewalld</code> to manage firewall settings, be aware that when you expose container ports using Docker, these ports bypass your firewall rules. For more information, refer to Docker and ufw.</li> <li>Docker is only compatible with <code>iptables-nft</code> and <code>iptables-legacy</code>. Firewall rules created with <code>nft</code> are not supported on a system with Docker installed. Ensure that any firewall rulesets you use are created with <code>iptables</code> or <code>ip6tables</code>, and that you add them to the <code>DOCKER-USER</code> chain. See Packet filtering and firewalls.</li> </ul>","tags":["Docker"]},{"location":"setup_docker_debian/#os-requirements","title":"OS Requirements","text":"<p>To install Docker Engine, you need the 64-bit version of one of these Debian versions:</p> <ul> <li>Debian Bookworm 12 (stable)</li> <li>Debian Bullseye 11 (oldstable)</li> </ul> <p>Docker Engine for Debian is compatible with the following architectures:</p> <ul> <li><code>x86_64</code> (or <code>amd64</code>)</li> <li><code>armhf</code></li> <li><code>arm64</code></li> <li><code>ppc64le</code> (or <code>ppc64el</code>)</li> </ul>","tags":["Docker"]},{"location":"setup_docker_debian/#uninstall-old-versions","title":"Uninstall Old Versions","text":"<p>Before installing Docker Engine, uninstall any conflicting packages. Your Linux distribution may provide unofficial Docker packages, which may conflict with the official packages provided by Docker. Uninstall these packages before proceeding:</p> <ul> <li><code>docker.io</code></li> <li><code>docker-compose</code></li> <li><code>docker-doc</code></li> <li><code>podman-docker</code></li> </ul> <p>Docker Engine depends on <code>containerd</code> and <code>runc</code>, which are bundled as <code>containerd.io</code>. If you have previously installed <code>containerd</code> or <code>runc</code>, uninstall them to avoid conflicts.</p> <p>Run the following command to uninstall all conflicting packages:</p> <pre><code>for pkg in docker.io docker-doc docker-compose podman-docker containerd runc; do sudo apt-get remove $pkg; done\n</code></pre> <p>Note: <code>apt-get</code> might report that none of these packages are installed.</p> <p>Images, containers, volumes, and networks stored in <code>/var/lib/docker/</code> aren't automatically removed when you uninstall Docker. If you want a clean installation, refer to the uninstall Docker Engine section.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#installation-methods","title":"Installation Methods","text":"<p>You can install Docker Engine in different ways, depending on your needs:</p> <ol> <li>Docker Desktop for Linux: The easiest and quickest way to get started.</li> <li>Set up and install Docker Engine from Docker's apt repository.</li> <li>Install manually and manage upgrades manually.</li> <li>Use a convenience script: Recommended only for testing and development environments.</li> </ol>","tags":["Docker"]},{"location":"setup_docker_debian/#install-using-the-apt-repository","title":"Install Using the apt Repository","text":"<p>Before installing Docker Engine for the first time on a new host machine, set up the Docker apt repository. Afterward, you can install and update Docker from the repository.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#set-up-dockers-apt-repository","title":"Set Up Docker's apt Repository","text":"<ol> <li>Add Docker's official GPG key:</li> </ol> <pre><code>sudo apt-get update\nsudo apt-get install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n</code></pre> <ol> <li>Add the repository to Apt sources:</li> </ol> <pre><code>echo \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt-get update\n</code></pre> <p>Note: If you use a derivative distribution, such as Kali Linux, you may need to substitute the part of this command that prints the version codename:</p> <pre><code>(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\")\n</code></pre> <p>Replace this part with the codename of the corresponding Debian release, such as <code>bookworm</code>.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#install-the-docker-packages","title":"Install the Docker Packages","text":"","tags":["Docker"]},{"location":"setup_docker_debian/#latest-version","title":"Latest Version","text":"<p>To install the latest version, run:</p> <pre><code>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> <p>Verify the installation by running the <code>hello-world</code> image:</p> <pre><code>sudo docker run hello-world\n</code></pre> <p>This command downloads a test image and runs it in a container. When the container runs, it prints a confirmation message and exits.</p> <p>Tip: Receiving errors when trying to run without root? The <code>docker</code> user group exists but contains no users, which is why you\u2019re required to use <code>sudo</code> to run Docker commands. Refer to Linux postinstall to allow non-privileged users to run Docker commands.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#upgrade-docker-engine","title":"Upgrade Docker Engine","text":"<p>To upgrade Docker Engine, follow the installation instructions, choosing the new version you want to install.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#install-using-the-convenience-script","title":"Install Using the Convenience Script","text":"<p>Docker provides a convenience script at https://get.docker.com/ to install Docker into development environments non-interactively. This script isn't recommended for production environments but is useful for creating a provisioning script tailored to your needs.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#example","title":"Example","text":"<p>Download and run the script:</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n</code></pre> <p>Tip: Preview script steps before running by using the <code>--dry-run</code> option:</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh ./get-docker.sh --dry-run\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_debian/#uninstall-docker-engine","title":"Uninstall Docker Engine","text":"<p>To uninstall Docker Engine, CLI, <code>containerd</code>, and Docker Compose packages, run:</p> <pre><code>sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras\n</code></pre> <p>To delete all images, containers, and volumes:</p> <pre><code>sudo rm -rf /var/lib/docker\nsudo rm -rf /var/lib/containerd\n</code></pre> <p>Remove source list and keyrings:</p> <pre><code>sudo rm /etc/apt/sources.list.d/docker.list\nsudo rm /etc/apt/keyrings/docker.asc\n</code></pre> <p>Note: You must delete any edited configuration files manually.</p>","tags":["Docker"]},{"location":"setup_docker_debian/#next-steps","title":"Next Steps","text":"<p>Continue to Post-installation steps for Linux.</p>","tags":["Docker"]},{"location":"setup_docker_postinstallation/","title":"Post-Installation","text":"","tags":["Docker"]},{"location":"setup_docker_postinstallation/#manage-docker-as-a-non-root-user","title":"Manage Docker as a Non-Root User","text":"<p>The Docker daemon binds to a Unix socket, not a TCP port. By default, the root user owns the Unix socket, and other users can only access it using <code>sudo</code>. The Docker daemon always runs as the root user.</p> <p>If you don't want to preface the <code>docker</code> command with <code>sudo</code>, create a Unix group called <code>docker</code> and add users to it. When the Docker daemon starts, it creates a Unix socket accessible by members of the <code>docker</code> group. On some Linux distributions, the system automatically creates this group when installing Docker Engine using a package manager. In that case, there is no need to manually create the group.</p> <p>Warning The <code>docker</code> group grants root-level privileges to the user. For details on how this impacts security in your system, see Docker Daemon Attack Surface.</p> <p>Note: To run Docker without root privileges, see Run the Docker daemon as a non-root user (Rootless mode).</p>","tags":["Docker"]},{"location":"setup_docker_postinstallation/#steps-to-create-the-docker-group-and-add-your-user","title":"Steps to Create the Docker Group and Add Your User","text":"<ol> <li> <p>Create the docker group:     </p><pre><code>sudo groupadd docker\n</code></pre><p></p> </li> <li> <p>Add your user to the docker group:     </p><pre><code>sudo usermod -aG docker $USER\n</code></pre><p></p> </li> <li> <p>Log out and log back in so that your group membership is re-evaluated.</p> <ul> <li>If you're running Linux in a virtual machine, it may be necessary to restart the virtual machine for changes to take effect.</li> <li>Alternatively, run the following command to activate the changes to groups:   <pre><code>newgrp docker\n</code></pre></li> </ul> </li> <li> <p>Verify that you can run Docker commands without sudo:     </p><pre><code>docker run hello-world\n</code></pre>     This command downloads a test image and runs it in a container. When the container runs, it prints a message and exits.<p></p> </li> </ol>","tags":["Docker"]},{"location":"setup_docker_postinstallation/#fixing-permission-errors","title":"Fixing Permission Errors","text":"<p>If you initially ran Docker CLI commands using <code>sudo</code> before adding your user to the <code>docker</code> group, you may encounter the following error: </p><pre><code>WARNING: Error loading config file: /home/user/.docker/config.json -\nstat /home/user/.docker/config.json: permission denied\n</code></pre><p></p> <p>To fix this issue, either:</p> <ul> <li>Remove the <code>~/.docker/</code> directory (it will be recreated automatically, but any custom settings will be lost):   <pre><code>rm -rf ~/.docker\n</code></pre></li> <li>Or change its ownership and permissions:   <pre><code>sudo chown \"$USER\":\"$USER\" /home/\"$USER\"/.docker -R\nsudo chmod g+rwx \"$HOME/.docker\" -R\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"setup_docker_postinstallation/#configure-docker-to-start-on-boot-with-systemd","title":"Configure Docker to Start on Boot with systemd","text":"<p>Many modern Linux distributions use <code>systemd</code> to manage services at boot. On Debian and Ubuntu, the Docker service starts on boot by default. To enable this behavior on other Linux distributions using <code>systemd</code>, run: </p><pre><code>sudo systemctl enable docker.service\nsudo systemctl enable containerd.service\n</code></pre><p></p> <p>To disable this behavior, use: </p><pre><code>sudo systemctl disable docker.service\nsudo systemctl disable containerd.service\n</code></pre><p></p> <p>You can also use <code>systemd</code> unit files to configure the Docker service on startup. For example, you can add an HTTP proxy, set a different directory for Docker runtime files, or apply other customizations. See Configure the daemon to use a proxy for more details.</p>","tags":["Docker"]},{"location":"setup_docker_postinstallation/#configure-default-logging-driver","title":"Configure Default Logging Driver","text":"<p>Docker provides logging drivers for collecting and viewing log data from all containers running on a host. The default logging driver, <code>json-file</code>, writes log data to JSON-formatted files on the host filesystem. Over time, these log files can grow in size, potentially exhausting disk resources.</p> <p>To avoid disk overuse, consider one of the following options:</p> <ul> <li>Configure the <code>json-file</code> logging driver to enable log rotation.</li> <li>Use an alternative logging driver, such as the <code>local</code> logging driver, which performs log rotation by default.</li> <li>Use a logging driver that sends logs to a remote logging aggregator.</li> </ul>","tags":["Docker"]},{"location":"setup_docker_postinstallation/#next-steps","title":"Next Steps","text":"<p>Explore the Docker workshop to learn how to build an image and run it as a containerized application.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/","title":"Docker on RHEL","text":"","tags":["Docker"]},{"location":"setup_docker_rhel/#install-docker-engine-on-rhel","title":"Install Docker Engine on RHEL","text":"<p>To get started with Docker Engine on RHEL, ensure you meet the prerequisites and follow the installation steps.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#prerequisites","title":"Prerequisites","text":"","tags":["Docker"]},{"location":"setup_docker_rhel/#os-requirements","title":"OS Requirements","text":"<p>To install Docker Engine, you need a maintained version of one of the following RHEL versions: - RHEL 8 - RHEL 9</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#uninstall-old-versions","title":"Uninstall Old Versions","text":"<p>Before installing Docker Engine, uninstall any conflicting packages. Your Linux distribution may provide unofficial Docker packages that conflict with the official ones. Remove them using the following command:</p> <pre><code>sudo dnf remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine \\\n                  podman \\\n                  runc\n</code></pre> <p>Note: <code>dnf</code> might report that none of these packages are installed. Images, containers, volumes, and networks stored in <code>/var/lib/docker/</code> aren't automatically removed when you uninstall Docker.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#installation-methods","title":"Installation Methods","text":"<p>You can install Docker Engine in different ways, depending on your needs:</p> <ol> <li>Using Docker's Repositories (Recommended): Set up Docker's repositories for easier installation and upgrades.</li> <li>Manual RPM Installation: Download and install the RPM package manually, useful for air-gapped systems.</li> <li>Automated Convenience Scripts: Use scripts for quick installation in testing and development environments.</li> </ol>","tags":["Docker"]},{"location":"setup_docker_rhel/#install-using-the-rpm-repository","title":"Install Using the RPM Repository","text":"","tags":["Docker"]},{"location":"setup_docker_rhel/#step-1-set-up-the-repository","title":"Step 1: Set Up the Repository","text":"<p>Install the <code>dnf-plugins-core</code> package and add the Docker repository:</p> <pre><code>sudo dnf -y install dnf-plugins-core\nsudo dnf config-manager --add-repo https://download.docker.com/linux/rhel/docker-ce.repo\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_rhel/#step-2-install-docker-engine","title":"Step 2: Install Docker Engine","text":"<p>To install the latest version:</p> <pre><code>sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> <p>Verify the GPG key fingerprint matches <code>060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35</code> before accepting it.</p> <p>Start Docker and enable it to start on boot:</p> <pre><code>sudo systemctl enable --now docker\n</code></pre> <p>Verify the installation:</p> <pre><code>sudo docker run hello-world\n</code></pre> <p>Tip: If you encounter permission errors, refer to the Linux post-installation steps to allow non-root users to run Docker commands.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#install-from-a-package","title":"Install from a Package","text":"<p>If you can't use Docker's repository, download the <code>.rpm</code> files for your RHEL version from Docker's download page. Install them using:</p> <pre><code>sudo dnf install ./containerd.io-&lt;version&gt;.&lt;arch&gt;.rpm \\\n  ./docker-ce-&lt;version&gt;.&lt;arch&gt;.rpm \\\n  ./docker-ce-cli-&lt;version&gt;.&lt;arch&gt;.rpm \\\n  ./docker-buildx-plugin-&lt;version&gt;.&lt;arch&gt;.rpm \\\n  ./docker-compose-plugin-&lt;version&gt;.&lt;arch&gt;.rpm\n</code></pre> <p>Start Docker:</p> <pre><code>sudo systemctl enable --now docker\n</code></pre> <p>Verify the installation:</p> <pre><code>sudo docker run hello-world\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_rhel/#install-using-the-convenience-script","title":"Install Using the Convenience Script","text":"<p>Docker provides a script for non-interactive installation. Use it for development environments only:</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n</code></pre> <p>Tip: Use the <code>--dry-run</code> option to preview the script's steps before running it.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#install-pre-releases","title":"Install Pre-Releases","text":"<p>To install pre-releases of Docker, use the test channel script:</p> <pre><code>curl -fsSL https://test.docker.com -o test-docker.sh\nsudo sh test-docker.sh\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_rhel/#upgrade-docker-engine","title":"Upgrade Docker Engine","text":"<p>To upgrade Docker, follow the installation instructions for the desired version. If using manual RPM installation, replace <code>dnf install</code> with <code>dnf upgrade</code>.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#uninstall-docker-engine","title":"Uninstall Docker Engine","text":"<p>Remove Docker packages:</p> <pre><code>sudo dnf remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras\n</code></pre> <p>To delete all images, containers, and volumes:</p> <pre><code>sudo rm -rf /var/lib/docker\nsudo rm -rf /var/lib/containerd\n</code></pre> <p>Note: Manually delete any edited configuration files.</p>","tags":["Docker"]},{"location":"setup_docker_rhel/#next-steps","title":"Next Steps","text":"<p>Continue to Post-installation steps for Linux.</p>","tags":["Docker"]},{"location":"setup_docker_rootless/","title":"Docker Rootless","text":"","tags":["Docker"]},{"location":"setup_docker_rootless/#rootless-mode","title":"Rootless Mode","text":"<p>Rootless mode allows running the Docker daemon and containers as a non-root user to mitigate potential vulnerabilities in the daemon and the container runtime. It does not require root privileges during installation, provided the prerequisites are met.</p>","tags":["Docker"]},{"location":"setup_docker_rootless/#how-it-works","title":"How It Works","text":"<p>Rootless mode executes the Docker daemon and containers inside a user namespace. Unlike userns-remap mode, where the daemon runs with root privileges, in rootless mode, both the daemon and containers run without root privileges. It avoids using binaries with SETUID bits or file capabilities, except for <code>newuidmap</code> and <code>newgidmap</code>, which enable multiple UIDs/GIDs in the user namespace.</p>","tags":["Docker"]},{"location":"setup_docker_rootless/#prerequisites","title":"Prerequisites","text":"<ol> <li>Install <code>newuidmap</code> and <code>newgidmap</code> (provided by the <code>uidmap</code> package on most distributions).</li> <li>Ensure <code>/etc/subuid</code> and <code>/etc/subgid</code> contain at least 65,536 subordinate UIDs/GIDs for the user.</li> </ol> <p>Example: </p><pre><code>id -u\n1001\nwhoami\ntestuser\ngrep ^$(whoami): /etc/subuid\ntestuser:231072:65536\ngrep ^$(whoami): /etc/subgid\ntestuser:231072:65536\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#distribution-specific-hints","title":"Distribution-Specific Hints","text":"","tags":["Docker"]},{"location":"setup_docker_rootless/#ubuntu","title":"Ubuntu","text":"<ul> <li>Install <code>dbus-user-session</code> and <code>uidmap</code> packages:     <pre><code>sudo apt-get install -y dbus-user-session uidmap\n</code></pre></li> <li>If using a terminal where the user was not directly logged in, install <code>systemd-container</code>:     <pre><code>sudo apt-get install -y systemd-container\nsudo machinectl shell TheUser@\n</code></pre></li> <li>For Ubuntu 24.04 and later, configure AppArmor for unprivileged user namespaces if needed.</li> </ul>","tags":["Docker"]},{"location":"setup_docker_rootless/#other-distributions","title":"Other Distributions","text":"<p>Refer to the specific instructions for Debian, Arch Linux, openSUSE, CentOS, RHEL, and Fedora.</p>","tags":["Docker"]},{"location":"setup_docker_rootless/#known-limitations","title":"Known Limitations","text":"<ul> <li>Supported storage drivers:</li> <li><code>overlay2</code> (kernel 5.11+ or Ubuntu-flavored kernel)</li> <li><code>fuse-overlayfs</code> (kernel 4.18+)</li> <li><code>btrfs</code> (with <code>user_subvol_rm_allowed</code> mount option)</li> <li><code>vfs</code></li> <li>Cgroup v2 and systemd are required for resource limiting.</li> <li>Unsupported features:</li> <li>AppArmor</li> <li>Checkpoint</li> <li>Overlay network</li> <li>Exposing SCTP ports</li> <li>Networking limitations:</li> <li>IP address in <code>docker inspect</code> is namespaced.</li> <li>Host network (<code>--net=host</code>) is namespaced.</li> <li>NFS mounts as <code>data-root</code> are not supported.</li> </ul>","tags":["Docker"]},{"location":"setup_docker_rootless/#installation","title":"Installation","text":"","tags":["Docker"]},{"location":"setup_docker_rootless/#with-packages-rpmdeb","title":"With Packages (RPM/DEB)","text":"<ol> <li>Run the setup tool as a non-root user:     <pre><code>dockerd-rootless-setuptool.sh install\n</code></pre></li> <li>Add the following to <code>~/.bashrc</code>:     <pre><code>export PATH=/usr/bin:$PATH\nexport DOCKER_HOST=unix:///run/user/1000/docker.sock\n</code></pre></li> </ol>","tags":["Docker"]},{"location":"setup_docker_rootless/#without-packages","title":"Without Packages","text":"<p>Install <code>docker-ce-rootless-extras</code> manually: </p><pre><code>sudo apt-get install -y docker-ce-rootless-extras\n</code></pre><p></p> <p>If the system-wide Docker daemon is already running, consider disabling it: </p><pre><code>sudo systemctl disable --now docker.service docker.socket\nsudo rm /var/run/docker.sock\n</code></pre><p></p> <p>Run the setup tool: </p><pre><code>dockerd-rootless-setuptool.sh install\n</code></pre><p></p> <p>Add the following to <code>~/.bashrc</code>: </p><pre><code>export PATH=/usr/bin:$PATH\nexport DOCKER_HOST=unix:///run/user/1000/docker.sock\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#uninstallation","title":"Uninstallation","text":"<p>To remove the systemd service of the Docker daemon: </p><pre><code>dockerd-rootless-setuptool.sh uninstall\n</code></pre><p></p> <p>Unset environment variables <code>PATH</code> and <code>DOCKER_HOST</code> if added to <code>~/.bashrc</code>. To remove data: </p><pre><code>rootlesskit rm -rf ~/.local/share/docker\n</code></pre><p></p> <p>To remove binaries, delete the <code>docker-ce-rootless-extras</code> package or manually remove binaries under <code>~/bin</code>.</p>","tags":["Docker"]},{"location":"setup_docker_rootless/#usage","title":"Usage","text":"","tags":["Docker"]},{"location":"setup_docker_rootless/#daemon-management","title":"Daemon Management","text":"<p>With systemd: </p><pre><code>systemctl --user start docker\nsystemctl --user enable docker\nsudo loginctl enable-linger $(whoami)\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#client-configuration","title":"Client Configuration","text":"<p>Specify the socket path: </p><pre><code>export DOCKER_HOST=unix://$XDG_RUNTIME_DIR/docker.sock\ndocker run -d -p 8080:80 nginx\n</code></pre><p></p> <p>Or use CLI context: </p><pre><code>docker context use rootless\ndocker run -d -p 8080:80 nginx\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#best-practices","title":"Best Practices","text":"","tags":["Docker"]},{"location":"setup_docker_rootless/#running-rootless-docker-in-docker","title":"Running Rootless Docker in Docker","text":"<p>Use the <code>docker:&lt;version&gt;-dind-rootless</code> image: </p><pre><code>docker run -d --name dind-rootless --privileged docker:25.0-dind-rootless\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#exposing-docker-api-socket","title":"Exposing Docker API Socket","text":"<p>Expose through TCP: </p><pre><code>DOCKERD_ROOTLESS_ROOTLESSKIT_FLAGS=\"-p 0.0.0.0:2376:2376/tcp\" \\\ndockerd-rootless.sh -H tcp://0.0.0.0:2376 --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem\n</code></pre><p></p> <p>Expose through SSH: </p><pre><code>ssh -l REMOTEUSER REMOTEHOST 'echo $DOCKER_HOST'\ndocker -H ssh://REMOTEUSER@REMOTEHOST run ...\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#resource-limiting","title":"Resource Limiting","text":"<p>Use cgroup v2 and systemd for resource limiting: </p><pre><code>mkdir -p /etc/systemd/system/user@.service.d\ncat &gt; /etc/systemd/system/user@.service.d/delegate.conf &lt;&lt; EOF\n[Service]\nDelegate=cpu cpuset io memory pids\nEOF\nsystemctl daemon-reload\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_rootless/#troubleshooting","title":"Troubleshooting","text":"","tags":["Docker"]},{"location":"setup_docker_rootless/#common-errors","title":"Common Errors","text":"<ul> <li>Systemd not detected: Use <code>dockerd-rootless.sh</code> manually.</li> <li>Unprivileged user namespace disabled: Set <code>kernel.unprivileged_userns_clone=1</code> in <code>/etc/sysctl.conf</code>.</li> <li>Insufficient subuid/subgid ranges: Configure <code>/etc/subuid</code> and <code>/etc/subgid</code>.</li> </ul>","tags":["Docker"]},{"location":"setup_docker_rootless/#networking-issues","title":"Networking Issues","text":"<ul> <li>Ping doesn't work: Add <code>net.ipv4.ping_group_range = 0 2147483647</code> to <code>/etc/sysctl.conf</code>.</li> <li>Slow network: Install <code>slirp4netns</code> or adjust MTU.</li> </ul> <p>For more details, refer to the official Docker documentation. ```</p>","tags":["Docker"]},{"location":"setup_docker_swarm/","title":"Docker Swarm","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#docker-swarm-setup-guide","title":"Docker Swarm Setup Guide","text":"<p>A guide for initializing and managing a Docker Swarm cluster for container orchestration across multiple nodes.</p>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#concepts","title":"Concepts","text":"Term Description Manager Nodes that manage the cluster state and schedule services Worker Nodes that run containerized workloads Service A definition of tasks to run on the cluster Task A single container instance running as part of a service Overlay Network Multi-host networking for Swarm services <p>Tip: For high availability, use 3 or 5 manager nodes (always an odd number for Raft consensus).</p>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#initialize-swarm","title":"Initialize Swarm","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#on-the-first-manager-node","title":"On the First Manager Node","text":"<pre><code>docker swarm init --advertise-addr 10.0.0.10\n</code></pre> <p>This outputs join tokens for managers and workers.</p>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#retrieve-join-tokens","title":"Retrieve Join Tokens","text":"<pre><code># Worker token\ndocker swarm join-token worker\n\n# Manager token\ndocker swarm join-token manager\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#join-nodes","title":"Join Nodes","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#join-as-worker","title":"Join as Worker","text":"<p>Run on each worker node:</p> <pre><code>docker swarm join \\\n  --token SWMTKN-1-xxxxxxxxxxxxx \\\n  10.0.0.10:2377\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#join-as-manager","title":"Join as Manager","text":"<p>Run on additional manager nodes:</p> <pre><code>docker swarm join \\\n  --token SWMTKN-1-xxxxxxxxxxxxx \\\n  10.0.0.10:2377\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#verify-cluster","title":"Verify Cluster","text":"<pre><code>docker node ls\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#deploy-services","title":"Deploy Services","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#create-a-service","title":"Create a Service","text":"<pre><code>docker service create \\\n  --name nginx \\\n  --replicas 3 \\\n  --publish 80:80 \\\n  nginx:latest\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#list-services","title":"List Services","text":"<pre><code>docker service ls\ndocker service ps nginx\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#scale-a-service","title":"Scale a Service","text":"<pre><code>docker service scale nginx=5\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#update-a-service","title":"Update a Service","text":"<pre><code>docker service update \\\n  --image nginx:1.25 \\\n  --update-parallelism 1 \\\n  --update-delay 10s \\\n  nginx\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#remove-a-service","title":"Remove a Service","text":"<pre><code>docker service rm nginx\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#stack-deployment-compose-files","title":"Stack Deployment (Compose Files)","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#deploy-a-stack","title":"Deploy a Stack","text":"<pre><code>docker stack deploy -c docker-compose.yml myapp\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#example-stack-file","title":"Example Stack File","text":"<pre><code># docker-compose.yml\nservices:\n  web:\n    image: nginx:latest\n    deploy:\n      replicas: 3\n      placement:\n        constraints:\n          - node.role == worker\n      restart_policy:\n        condition: on-failure\n    ports:\n      - \"80:80\"\n\n  visualizer:\n    image: dockersamples/visualizer:latest\n    deploy:\n      placement:\n        constraints:\n          - node.role == manager\n    ports:\n      - \"8080:8080\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#list-stacks","title":"List Stacks","text":"<pre><code>docker stack ls\ndocker stack ps myapp\ndocker stack services myapp\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#remove-a-stack","title":"Remove a Stack","text":"<pre><code>docker stack rm myapp\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#multi-manager-ha","title":"Multi-Manager HA","text":"<p>For production, run 3 manager nodes:</p> <pre><code># On manager1 (first init)\ndocker swarm init --advertise-addr 10.0.0.10\n\n# On manager2\ndocker swarm join --token &lt;manager_token&gt; 10.0.0.10:2377\n\n# On manager3\ndocker swarm join --token &lt;manager_token&gt; 10.0.0.10:2377\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#promote-demote-nodes","title":"Promote / Demote Nodes","text":"<pre><code># Promote worker to manager\ndocker node promote &lt;node_name&gt;\n\n# Demote manager to worker\ndocker node demote &lt;node_name&gt;\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#networking","title":"Networking","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#create-overlay-network","title":"Create Overlay Network","text":"<pre><code>docker network create \\\n  --driver overlay \\\n  --attachable \\\n  my-overlay\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#use-in-service","title":"Use in Service","text":"<pre><code>docker service create \\\n  --name web \\\n  --network my-overlay \\\n  nginx:latest\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#monitoring-and-troubleshooting","title":"Monitoring and Troubleshooting","text":"","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#node-status","title":"Node Status","text":"<pre><code>docker node ls\ndocker node inspect &lt;node_name&gt; --pretty\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#service-logs","title":"Service Logs","text":"<pre><code>docker service logs nginx -f --tail 100\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#drain-a-node-maintenance","title":"Drain a Node (Maintenance)","text":"<pre><code># Remove workloads from a node\ndocker node update --availability drain &lt;node_name&gt;\n\n# Bring node back\ndocker node update --availability active &lt;node_name&gt;\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#leave-swarm","title":"Leave Swarm","text":"<pre><code># On the node to remove\ndocker swarm leave\n\n# Force (if manager)\ndocker swarm leave --force\n</code></pre>","tags":["Docker","Swarm"]},{"location":"setup_docker_swarm/#required-ports","title":"Required Ports","text":"Port Protocol Description 2377 TCP Cluster management 7946 TCP/UDP Node communication 4789 UDP Overlay network traffic","tags":["Docker","Swarm"]},{"location":"setup_docker_ubuntu/","title":"Docker on Ubuntu","text":"","tags":["Docker"]},{"location":"setup_docker_ubuntu/#install-docker-engine-on-ubuntu","title":"Install Docker Engine on Ubuntu","text":"<p>To get started with Docker Engine on Ubuntu, ensure you meet the prerequisites and follow the installation steps.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#prerequisites","title":"Prerequisites","text":"","tags":["Docker"]},{"location":"setup_docker_ubuntu/#firewall-limitations","title":"Firewall Limitations","text":"<p>Warning: Before installing Docker, consider the following security implications and firewall incompatibilities:</p> <ul> <li>If you use <code>ufw</code> or <code>firewalld</code> to manage firewall settings, be aware that exposing container ports using Docker bypasses your firewall rules. For more information, refer to Docker and ufw.</li> <li>Docker is only compatible with <code>iptables-nft</code> and <code>iptables-legacy</code>. Firewall rules created with <code>nft</code> are not supported. Ensure your firewall rulesets are created with <code>iptables</code> or <code>ip6tables</code> and added to the <code>DOCKER-USER</code> chain. See Packet filtering and firewalls.</li> </ul>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#os-requirements","title":"OS Requirements","text":"<p>To install Docker Engine, you need the 64-bit version of one of these Ubuntu versions:</p> <ul> <li>Ubuntu Oracular 24.10</li> <li>Ubuntu Noble 24.04 (LTS)</li> <li>Ubuntu Jammy 22.04 (LTS)</li> <li>Ubuntu Focal 20.04 (LTS)</li> </ul> <p>Docker Engine for Ubuntu is compatible with the following architectures: <code>x86_64</code> (or <code>amd64</code>), <code>armhf</code>, <code>arm64</code>, <code>s390x</code>, and <code>ppc64le</code> (ppc64el).</p> <p>Note: Installation on Ubuntu derivative distributions, such as Linux Mint, is not officially supported (though it may work).</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#uninstall-old-versions","title":"Uninstall Old Versions","text":"<p>Before installing Docker Engine, uninstall any conflicting packages. Your Linux distribution may provide unofficial Docker packages that conflict with the official packages provided by Docker. Uninstall these packages before proceeding.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#unofficial-packages-to-uninstall","title":"Unofficial Packages to Uninstall","text":"<ul> <li><code>docker.io</code></li> <li><code>docker-compose</code></li> <li><code>docker-compose-v2</code></li> <li><code>docker-doc</code></li> <li><code>podman-docker</code></li> </ul> <p>Docker Engine depends on <code>containerd</code> and <code>runc</code>, which are bundled as <code>containerd.io</code>. If you have previously installed <code>containerd</code> or <code>runc</code>, uninstall them to avoid conflicts.</p> <p>Run the following command to uninstall all conflicting packages:</p> <pre><code>for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done\n</code></pre> <p>Note: <code>apt-get</code> might report that none of these packages are installed.</p> <p>Images, containers, volumes, and networks stored in <code>/var/lib/docker/</code> aren't automatically removed when you uninstall Docker. To start with a clean installation, refer to the uninstall Docker Engine section.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#installation-methods","title":"Installation Methods","text":"<p>You can install Docker Engine in different ways, depending on your needs:</p> <ol> <li>Docker Desktop for Linux: Bundles Docker Engine and is the easiest way to get started.</li> <li>Using Docker's apt repository: Set up and install Docker Engine from Docker's repository.</li> <li>Manual installation: Download and install <code>.deb</code> packages manually.</li> <li>Convenience script: Recommended only for testing and development environments.</li> </ol>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#install-using-the-apt-repository","title":"Install Using the apt Repository","text":"<p>Before installing Docker Engine for the first time on a new host machine, set up the Docker apt repository. Afterward, you can install and update Docker from the repository.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#set-up-dockers-apt-repository","title":"Set Up Docker's apt Repository","text":"<ol> <li>Add Docker's official GPG key:</li> </ol> <pre><code>sudo apt-get update\nsudo apt-get install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n</code></pre> <ol> <li>Add the repository to Apt sources:</li> </ol> <pre><code>echo \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &amp;&amp; echo \"${UBUNTU_CODENAME:-$VERSION_CODENAME}\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt-get update\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#install-docker-packages","title":"Install Docker Packages","text":"<p>To install the latest version of Docker Engine, run:</p> <pre><code>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> <p>Verify the installation by running the <code>hello-world</code> image:</p> <pre><code>sudo docker run hello-world\n</code></pre> <p>This command downloads a test image and runs it in a container. When the container runs, it prints a confirmation message and exits.</p> <p>Tip: If you encounter errors when trying to run Docker without <code>sudo</code>, refer to the Linux post-installation steps to allow non-privileged users to run Docker commands.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#upgrade-docker-engine","title":"Upgrade Docker Engine","text":"<p>To upgrade Docker Engine, follow the installation instructions and choose the new version you want to install.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#install-using-the-convenience-script","title":"Install Using the Convenience Script","text":"<p>Docker provides a convenience script at https://get.docker.com/ to install Docker non-interactively. This script is useful for development environments but not recommended for production.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#example","title":"Example","text":"<p>Download and run the script:</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n</code></pre> <p>Tip: Use the <code>--dry-run</code> option to preview the script steps before running it.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#uninstall-docker-engine","title":"Uninstall Docker Engine","text":"<p>To uninstall Docker Engine, CLI, <code>containerd</code>, and Docker Compose packages, run:</p> <pre><code>sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras\n</code></pre> <p>To delete all images, containers, and volumes:</p> <pre><code>sudo rm -rf /var/lib/docker\nsudo rm -rf /var/lib/containerd\n</code></pre> <p>Remove source list and keyrings:</p> <pre><code>sudo rm /etc/apt/sources.list.d/docker.list\nsudo rm /etc/apt/keyrings/docker.asc\n</code></pre> <p>You must manually delete any edited configuration files.</p>","tags":["Docker"]},{"location":"setup_docker_ubuntu/#next-steps","title":"Next Steps","text":"<p>Continue to Post-installation steps for Linux.</p>","tags":["Docker"]},{"location":"setup_docker_wsl/","title":"Docker on WSL","text":"","tags":["Docker"]},{"location":"setup_docker_wsl/#setting-up-docker-with-wsl","title":"Setting Up Docker with WSL","text":"","tags":["Docker"]},{"location":"setup_docker_wsl/#1-install-and-configure-wsl","title":"1. Install and Configure WSL","text":"","tags":["Docker"]},{"location":"setup_docker_wsl/#enable-wsl-features","title":"Enable WSL Features","text":"<p>Open the command line as administrator and run the following commands to enable WSL features:</p> <p></p><pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n</code></pre> <pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n</code></pre><p></p>","tags":["Docker"]},{"location":"setup_docker_wsl/#install-the-linux-kernel-update-package","title":"Install the Linux Kernel Update Package","text":"<p>Download and install the latest Linux kernel update package from Microsoft:</p> <p>Download wsl_update_x64.msi</p> <p>After installation, restart Windows.</p>","tags":["Docker"]},{"location":"setup_docker_wsl/#set-wsl-to-version-2","title":"Set WSL to Version 2","text":"<p>Run the following command as administrator to set WSL to version 2:</p> <pre><code>wsl --set-default-version 2\n</code></pre> <p>Restart Windows again to apply the changes.</p>","tags":["Docker"]},{"location":"setup_docker_wsl/#2-enable-systemd-in-wsl","title":"2. Enable Systemd in WSL","text":"","tags":["Docker"]},{"location":"setup_docker_wsl/#check-wsl-version","title":"Check WSL Version","text":"<p>Ensure you are running WSL version <code>0.67.6</code> or higher. Check your version with:</p> <pre><code>wsl --version\n</code></pre> <p>If the command fails, upgrade to the Microsoft Store version of WSL. Run the following command to update:</p> <pre><code>wsl --update\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_wsl/#alternatively-download-the-latest-release-from-the","title":"Alternatively, download the latest release from the:","text":"<p>WSL release page.</p>","tags":["Docker"]},{"location":"setup_docker_wsl/#configure-systemd","title":"Configure Systemd","text":"<p>Edit the <code>wsl.conf</code> file to enable systemd. Open the file with sudo privileges:</p> <pre><code>sudo nano /etc/wsl.conf\n</code></pre> <p>Add the following lines:</p> <pre><code>[boot]\nsystemd=true\n</code></pre> <p>Save and exit the editor (<code>CTRL+O</code>, then <code>CTRL+X</code>).</p>","tags":["Docker"]},{"location":"setup_docker_wsl/#restart-wsl","title":"Restart WSL","text":"<p>Close your WSL instance and run the following command in PowerShell to restart WSL:</p> <pre><code>wsl.exe --shutdown\n</code></pre> <p>Launch your WSL instance again and verify systemd is running:</p> <pre><code>systemctl list-unit-files --type=service\n</code></pre> <p>For more details, refer to the official blog post.</p>","tags":["Docker"]},{"location":"setup_docker_wsl/#3-install-docker-and-docker-compose-v2-in-wsl-2","title":"3. Install Docker and Docker Compose v2 in WSL 2","text":"","tags":["Docker"]},{"location":"setup_docker_wsl/#install-docker","title":"Install Docker","text":"<p>Run the following commands to install Docker:</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_wsl/#add-your-user-to-the-docker-group","title":"Add Your User to the Docker Group","text":"<p>Add your user to the Docker group to avoid using <code>sudo</code> with Docker commands:</p> <pre><code>sudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_wsl/#verify-installation","title":"Verify Installation","text":"<p>Check that Docker and Docker Compose were installed successfully:</p> <pre><code>docker --version\ndocker compose version\n</code></pre>","tags":["Docker"]},{"location":"setup_docker_wsl/#4-additional-step-for-ubuntu-2204-or-debian-10","title":"4. Additional Step for Ubuntu 22.04 or Debian 10+","text":"<p>If you're using Ubuntu 22.04 or Debian 10+, configure <code>iptables</code> for compatibility:</p> <pre><code>sudo update-alternatives --config iptables\n</code></pre> <p>Select option <code>1</code> to use <code>iptables-legacy</code>.</p>","tags":["Docker"]},{"location":"setup_docker_wsl/#start-docker","title":"Start Docker","text":"<p>Start the Docker service:</p> <pre><code>sudo service docker start\n</code></pre> <p>Check the status of Docker:</p> <pre><code>sudo service docker status\n</code></pre> <p>Note: You may need to reboot Windows or restart WSL after applying the <code>iptables</code> configuration to ensure networking inside your containers works correctly.</p>","tags":["Docker"]},{"location":"setup_jenkins/","title":"Jenkins","text":"","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#jenkins-setup-guide","title":"Jenkins Setup Guide","text":"<p>A guide for running Jenkins with Docker, including Docker-in-Docker support, agent configuration, and pipeline basics.</p>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#jenkins-with-docker-setup","title":"Jenkins with Docker Setup","text":"","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#dockerfile","title":"Dockerfile","text":"<pre><code>FROM jenkins/jenkins:lts-jdk21\n\nUSER root\n\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n\n# Install prerequisites\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y --no-install-recommends \\\n    lsb-release \\\n    python3-pip \\\n    git \\\n    curl \\\n    maven \\\n    ansible \\\n    ca-certificates \\\n    gnupg-agent \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# Add Docker's official GPG key and repository\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg \\\n    | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg &amp;&amp; \\\n    echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] \\\n    https://download.docker.com/linux/debian $(lsb_release -cs) stable\" \\\n    &gt; /etc/apt/sources.list.d/docker.list\n\n# Install Docker CLI\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y --no-install-recommends docker-ce-cli &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/*\n\n# Handle docker group for socket access\nRUN if getent group docker; then \\\n      usermod -aG docker jenkins; \\\n    else \\\n      groupadd -g 989 docker &amp;&amp; usermod -aG docker jenkins; \\\n    fi\n\nUSER jenkins\n\n# Install Jenkins plugins\nRUN jenkins-plugin-cli --plugins \\\n    blueocean \\\n    docker-workflow \\\n    git \\\n    job-dsl \\\n    configuration-as-code \\\n    credentials-binding \\\n    workflow-aggregator \\\n    workflow-cps \\\n    dark-theme \\\n    locale\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>services:\n  jenkins:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: jenkins\n    ports:\n      - \"8080:8080\"\n      - \"50000:50000\"\n    volumes:\n      - ./jenkins_home:/var/jenkins_home\n      - /var/run/docker.sock:/var/run/docker.sock\n    environment:\n      TZ: \"Europe/Warsaw\"\n    networks:\n      - jenkins\n    restart: unless-stopped\n\nnetworks:\n  jenkins:\n    driver: bridge\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#build-and-start","title":"Build and Start","text":"<pre><code>docker compose up -d --build\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#verify","title":"Verify","text":"<pre><code># Check Jenkins is running\ndocker logs jenkins\n\n# Verify Docker access from Jenkins container\ndocker exec -it jenkins docker ps\n</code></pre> <p>Access Jenkins at <code>http://server.example.com:8080</code></p>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#jenkins-plugins","title":"Jenkins Plugins","text":"<p>Essential plugins installed via <code>jenkins-plugin-cli</code>:</p> Plugin Purpose <code>blueocean</code> Modern pipeline UI <code>docker-workflow</code> Docker pipeline support <code>git</code> Git SCM integration <code>job-dsl</code> Programmatic job creation <code>configuration-as-code</code> Jenkins config as YAML <code>credentials-binding</code> Secure credential injection <code>workflow-aggregator</code> Pipeline aggregation","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#build-configuration","title":"Build Configuration","text":"","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#discard-old-builds","title":"Discard Old Builds","text":"<p>Keep storage under control by configuring build retention:</p> <ul> <li>Days to keep builds: e.g., 30</li> <li>Max # of builds to keep: e.g., 10</li> </ul>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#build-triggers","title":"Build Triggers","text":"Trigger Description GitHub hook trigger Builds on push via webhook Poll SCM Periodically checks for changes (<code>H/5 * * * *</code>) Build periodically Cron-based schedule Build after other projects Chain builds together Trigger builds remotely Via authentication token","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#parameterized-builds","title":"Parameterized Builds","text":"<p>Enable <code>This project is parameterized</code> to add: - String parameters - Choice parameters - Boolean parameters - File parameters</p>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#jenkinsfile-declarative-pipeline","title":"Jenkinsfile (Declarative Pipeline)","text":"<pre><code>pipeline {\n    agent any\n\n    environment {\n        DOCKER_IMAGE = 'myapp'\n        DOCKER_TAG = \"${env.BUILD_NUMBER}\"\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                git branch: 'main',\n                    url: 'https://github.com/your_username/your-repo.git'\n            }\n        }\n\n        stage('Build') {\n            steps {\n                sh 'docker build -t ${DOCKER_IMAGE}:${DOCKER_TAG} .'\n            }\n        }\n\n        stage('Test') {\n            steps {\n                sh 'docker run --rm ${DOCKER_IMAGE}:${DOCKER_TAG} npm test'\n            }\n        }\n\n        stage('Deploy') {\n            steps {\n                sh 'docker compose up -d'\n            }\n        }\n    }\n\n    post {\n        always {\n            cleanWs()\n        }\n    }\n}\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#jenkins-agent-with-docker","title":"Jenkins Agent with Docker","text":"","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#agent-docker-composeyml","title":"Agent docker-compose.yml","text":"<pre><code>services:\n  jenkins-agent:\n    image: jenkins/inbound-agent:latest\n    container_name: jenkins-agent\n    environment:\n      JENKINS_URL: \"http://jenkins:8080\"\n      JENKINS_SECRET: \"your_api_token_here\"\n      JENKINS_AGENT_NAME: \"docker-agent\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - jenkins\n\nnetworks:\n  jenkins:\n    external: true\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#configure-agent-in-jenkins-ui","title":"Configure Agent in Jenkins UI","text":"<ol> <li>Go to <code>Manage Jenkins &gt; Nodes &gt; New Node</code></li> <li>Set node name and select <code>Permanent Agent</code></li> <li>Configure:</li> <li>Remote root directory: <code>/home/jenkins</code></li> <li>Labels: <code>docker</code></li> <li>Launch method: <code>Launch agent by connecting it to the controller</code></li> <li>Copy the secret token to agent configuration</li> </ol>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#cache-management","title":"Cache Management","text":"","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#workspace-cleanup","title":"Workspace Cleanup","text":"<p>Install the Workspace Cleanup Plugin, then configure:</p> <ul> <li>Delete workspace before build starts - clean slate for each build</li> <li>Delete workspace when build is done - free space after completion</li> </ul>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#pipeline-cleanup","title":"Pipeline Cleanup","text":"<pre><code>pipeline {\n    agent any\n    stages {\n        stage('Build') {\n            steps {\n                sh 'echo \"Building...\"'\n            }\n        }\n    }\n    post {\n        always {\n            // Clean workspace\n            deleteDir()\n\n            // Clean Docker cache\n            sh 'docker system prune -af --volumes || true'\n        }\n    }\n}\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#docker-prune-manual","title":"Docker Prune (Manual)","text":"<pre><code># Remove all unused containers, images, networks, volumes\ndocker system prune -af --volumes\n\n# Remove only dangling images\ndocker image prune -f\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#troubleshooting","title":"Troubleshooting","text":"","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#jenkins_home","title":"JENKINS_HOME","text":"<p>Jenkins stores all data in <code>/var/jenkins_home</code>. If using Docker volumes, ensure proper permissions:</p> <pre><code># Fix ownership issues\nsudo chown -R 1000:1000 ./jenkins_home\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#docker-socket-access","title":"Docker Socket Access","text":"<p>If Jenkins cannot access Docker:</p> <pre><code># Check socket permissions\nls -la /var/run/docker.sock\n\n# Add jenkins user to docker group inside container\ndocker exec -u root jenkins usermod -aG docker jenkins\ndocker restart jenkins\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_jenkins/#view-logs","title":"View Logs","text":"<pre><code>docker logs jenkins -f --tail 100\n</code></pre>","tags":["DevOps","Jenkins"]},{"location":"setup_kubernetes/","title":"Kubernetes (K3s)","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#kubernetes-k3s-setup-guide","title":"Kubernetes (K3s) Setup Guide","text":"<p>A comprehensive guide for installing and configuring a lightweight Kubernetes cluster using K3s on Ubuntu.</p>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#what-is-k3s","title":"What is K3s?","text":"<p>K3s is a lightweight, certified Kubernetes distribution designed for resource-constrained environments. It bundles everything needed into a single binary under 100MB.</p>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#server-installation","title":"Server Installation","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#install-k3s-server-control-plane","title":"Install K3s Server (Control Plane)","text":"<pre><code>curl -sfL https://get.k3s.io | sh -\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#verify-node-readiness","title":"Verify Node Readiness","text":"<p>Wait approximately 30 seconds, then verify:</p> <pre><code>sudo k3s kubectl get node\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#retrieve-node-token","title":"Retrieve Node Token","text":"<p>The token is required for joining worker nodes:</p> <pre><code>sudo cat /var/lib/rancher/k3s/server/node-token\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#get-kubeconfig","title":"Get Kubeconfig","text":"<pre><code>sudo cat /etc/rancher/k3s/k3s.yaml\n</code></pre> <p>Tip: Copy this file to your local machine for remote <code>kubectl</code> access. Replace the <code>server</code> address <code>127.0.0.1</code> with your server's IP.</p> <pre><code># Copy kubeconfig to local machine\nscp your_username@10.0.0.10:/etc/rancher/k3s/k3s.yaml ~/.kube/k3s.yaml\nexport KUBECONFIG=~/.kube/k3s.yaml\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#agent-worker-node-installation","title":"Agent (Worker Node) Installation","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#join-a-worker-node","title":"Join a Worker Node","text":"<pre><code>curl -sfL https://get.k3s.io | K3S_URL=https://10.0.0.10:6443 K3S_TOKEN=&lt;your_node_token&gt; sh -\n</code></pre> <p>Replace <code>10.0.0.10</code> with your server's IP and <code>&lt;your_node_token&gt;</code> with the token from the server.</p>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#verify-cluster","title":"Verify Cluster","text":"<p>On the server node:</p> <pre><code>sudo k3s kubectl get nodes\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#kubectl-basics","title":"kubectl Basics","text":"<pre><code># List all pods across namespaces\nkubectl get pods -A\n\n# List nodes\nkubectl get nodes -o wide\n\n# Describe a specific resource\nkubectl describe pod &lt;pod_name&gt; -n &lt;namespace&gt;\n\n# View logs\nkubectl logs &lt;pod_name&gt; -n &lt;namespace&gt;\nkubectl logs &lt;pod_name&gt; -n &lt;namespace&gt; -f  # follow\n\n# Execute command in a pod\nkubectl exec -it &lt;pod_name&gt; -n &lt;namespace&gt; -- /bin/bash\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#deployments-and-replicasets","title":"Deployments and ReplicaSets","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#create-a-deployment","title":"Create a Deployment","text":"<pre><code># deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  labels:\n    app: nginx\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx:1.25\n          ports:\n            - containerPort: 80\n</code></pre> <pre><code>kubectl apply -f deployment.yaml\nkubectl get deployments\nkubectl get pods\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#scale-a-deployment","title":"Scale a Deployment","text":"<pre><code>kubectl scale deployment nginx-deployment --replicas=5\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#services","title":"Services","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#clusterip-internal-only","title":"ClusterIP (Internal Only)","text":"<pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-clusterip\nspec:\n  selector:\n    app: nginx\n  ports:\n    - port: 80\n      targetPort: 80\n  type: ClusterIP\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#nodeport-external-access-via-node-ip","title":"NodePort (External Access via Node IP)","text":"<pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-nodeport\nspec:\n  selector:\n    app: nginx\n  ports:\n    - port: 80\n      targetPort: 80\n      nodePort: 30080\n  type: NodePort\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#loadbalancer","title":"LoadBalancer","text":"<pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-lb\nspec:\n  selector:\n    app: nginx\n  ports:\n    - port: 80\n      targetPort: 80\n  type: LoadBalancer\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#ingress-with-traefik","title":"Ingress with Traefik","text":"<p>K3s ships with Traefik as the default Ingress Controller.</p> <pre><code>apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: example-ingress\n  annotations:\n    traefik.ingress.kubernetes.io/router.entrypoints: web\nspec:\n  rules:\n    - host: app.example.com\n      http:\n        paths:\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: nginx-clusterip\n                port:\n                  number: 80\n</code></pre> <pre><code>kubectl apply -f ingress.yaml\nkubectl get ingress\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#persistent-volumes-and-storageclasses","title":"Persistent Volumes and StorageClasses","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#persistentvolumeclaim","title":"PersistentVolumeClaim","text":"<pre><code>apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: app-pvc\nspec:\n  accessModes:\n    - ReadWriteOnce\n  storageClassName: local-path\n  resources:\n    requests:\n      storage: 5Gi\n</code></pre> <p>Note: K3s includes the <code>local-path</code> StorageClass by default.</p>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#use-pvc-in-a-pod","title":"Use PVC in a Pod","text":"<pre><code>spec:\n  containers:\n    - name: app\n      image: nginx:1.25\n      volumeMounts:\n        - mountPath: /data\n          name: app-storage\n  volumes:\n    - name: app-storage\n      persistentVolumeClaim:\n        claimName: app-pvc\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#configmaps-and-secrets","title":"ConfigMaps and Secrets","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#configmap","title":"ConfigMap","text":"<pre><code>kubectl create configmap app-config --from-literal=APP_ENV=production --from-literal=LOG_LEVEL=info\n</code></pre> <pre><code># Or as YAML\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\ndata:\n  APP_ENV: production\n  LOG_LEVEL: info\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#secret","title":"Secret","text":"<pre><code>kubectl create secret generic app-secret \\\n  --from-literal=DB_PASSWORD=your_password_here \\\n  --from-literal=API_KEY=your_api_token_here\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#helm-basics","title":"Helm Basics","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#install-helm","title":"Install Helm","text":"<pre><code>curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3\nchmod 700 get_helm.sh\n./get_helm.sh\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#install-a-chart-example-rancher","title":"Install a Chart (Example: Rancher)","text":"<pre><code>helm repo add rancher-latest https://releases.rancher.com/server-charts/latest\nhelm repo update\n\nkubectl create namespace cattle-system\nhelm install rancher rancher-latest/rancher \\\n  --namespace cattle-system \\\n  --set hostname=rancher.example.com \\\n  --set bootstrapPassword=your_password_here\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#verify-installation","title":"Verify Installation","text":"<pre><code>kubectl -n cattle-system rollout status deploy/rancher\nkubectl -n cattle-system get deploy rancher\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#troubleshooting","title":"Troubleshooting","text":"","tags":["Kubernetes"]},{"location":"setup_kubernetes/#port-conflicts","title":"Port Conflicts","text":"<pre><code># Check what is using a port\nsudo lsof -i :6443\nsudo lsof -i :6444\n\n# Kill blocking process\nsudo kill -9 &lt;PID&gt;\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#service-logs","title":"Service Logs","text":"<pre><code># Server logs\nsudo journalctl -u k3s.service -f\n\n# Agent logs\nsudo journalctl -u k3s-agent.service -f\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#firewall-ports","title":"Firewall Ports","text":"<p>Ensure these ports are open:</p> Port Protocol Description 6443 TCP Kubernetes API 8472 UDP Flannel VXLAN 10250 TCP Kubelet metrics 51820 UDP Flannel WireGuard <pre><code>sudo ufw status\nsudo ufw allow 6443/tcp\nsudo ufw allow 8472/udp\nsudo ufw allow 10250/tcp\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_kubernetes/#full-reinstall","title":"Full Reinstall","text":"<pre><code># Uninstall server\nsudo /usr/local/bin/k3s-uninstall.sh\n\n# Uninstall agent\nsudo /usr/local/bin/k3s-agent-uninstall.sh\n</code></pre>","tags":["Kubernetes"]},{"location":"setup_linux/","title":"Linux Essentials","text":"","tags":["Linux"]},{"location":"setup_linux/#linux-administration-essentials","title":"Linux Administration Essentials","text":"<p>A quick-reference guide covering the most common Linux administration tasks for homelab and server environments.</p>","tags":["Linux"]},{"location":"setup_linux/#system-update-and-package-management","title":"System Update and Package Management","text":"","tags":["Linux"]},{"location":"setup_linux/#ubuntu-debian-apt","title":"Ubuntu / Debian (APT)","text":"<pre><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y\nsudo apt-get dist-upgrade -y\nsudo apt-get autoremove -y\n</code></pre> <p>Tip: Use <code>apt list --upgradable</code> to preview available updates before upgrading.</p>","tags":["Linux"]},{"location":"setup_linux/#rhel-centos-fedora-dnf","title":"RHEL / CentOS / Fedora (DNF)","text":"<pre><code>sudo dnf check-update\nsudo dnf upgrade -y\nsudo dnf autoremove -y\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#install-common-tools","title":"Install Common Tools","text":"<pre><code>sudo apt update &amp;&amp; sudo apt install -y \\\n  mc nano net-tools iputils-ping curl wget git htop \\\n  tcpdump traceroute vim zip unzip neofetch bash-completion\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#service-management-systemd","title":"Service Management (systemd)","text":"<pre><code># Check service status\nsudo systemctl status &lt;service_name&gt;\n\n# Start / stop / restart a service\nsudo systemctl start &lt;service_name&gt;\nsudo systemctl stop &lt;service_name&gt;\nsudo systemctl restart &lt;service_name&gt;\n\n# Enable service at boot\nsudo systemctl enable &lt;service_name&gt;\n\n# View service logs\nsudo journalctl -u &lt;service_name&gt; -f\nsudo journalctl -u &lt;service_name&gt; --since \"1 hour ago\"\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#text-editors-quick-reference","title":"Text Editors Quick Reference","text":"","tags":["Linux"]},{"location":"setup_linux/#nano","title":"nano","text":"Shortcut Action <code>Ctrl+O</code> Save file <code>Ctrl+X</code> Exit <code>Ctrl+W</code> Search <code>Ctrl+K</code> Cut line <code>Ctrl+U</code> Paste line <code>Ctrl+G</code> Help <code>Ctrl+C</code> Show cursor position <code>Alt+U</code> Undo","tags":["Linux"]},{"location":"setup_linux/#vim","title":"vim","text":"Command Action <code>i</code> Enter insert mode <code>Esc</code> Exit insert mode <code>:w</code> Save <code>:q</code> Quit <code>:wq</code> Save and quit <code>:q!</code> Quit without saving <code>:set number</code> Show line numbers <code>/pattern</code> Search forward","tags":["Linux"]},{"location":"setup_linux/#network-configuration-with-netplan","title":"Network Configuration with Netplan","text":"<p>Netplan is the default network configuration tool on Ubuntu 18.04+.</p>","tags":["Linux"]},{"location":"setup_linux/#configuration-file-location","title":"Configuration file location","text":"<pre><code>ls /etc/netplan/\n# Typical files: 00-installer-config.yaml, 50-cloud-init.yaml\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#dhcp-configuration","title":"DHCP Configuration","text":"<pre><code># /etc/netplan/00-installer-config.yaml\nnetwork:\n  version: 2\n  ethernets:\n    eth0:\n      dhcp4: true\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#static-ip-configuration","title":"Static IP Configuration","text":"<pre><code># /etc/netplan/00-installer-config.yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    eth0:\n      dhcp4: false\n      addresses:\n        - 10.0.0.100/24\n      routes:\n        - to: default\n          via: 10.0.0.1\n      nameservers:\n        addresses:\n          - 1.1.1.1\n          - 1.0.0.1\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#apply-changes","title":"Apply Changes","text":"<pre><code>sudo netplan apply\n\n# Debug mode (verbose output)\nsudo netplan --debug apply\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#disable-cloud-init-network-config","title":"Disable Cloud-Init Network Config","text":"<p>If cloud-init keeps overwriting your netplan config:</p> <pre><code>echo \"network: {config: disabled}\" | sudo tee /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#firewall-management","title":"Firewall Management","text":"","tags":["Linux"]},{"location":"setup_linux/#ufw-uncomplicated-firewall","title":"UFW (Uncomplicated Firewall)","text":"<pre><code># Enable UFW\nsudo ufw enable\n\n# Allow SSH\nsudo ufw allow ssh\nsudo ufw allow 22/tcp\n\n# Allow specific port\nsudo ufw allow 8080/tcp\n\n# Deny a port\nsudo ufw deny 3306/tcp\n\n# Check status\nsudo ufw status verbose\n\n# Disable UFW\nsudo ufw disable\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#iptables-basics","title":"IPTables Basics","text":"<pre><code># List all rules\nsudo iptables -L -v\n\n# Flush all rules (reset)\nsudo iptables -F\nsudo iptables -t nat -F\nsudo iptables -t mangle -F\n\n# Set default policies\nsudo iptables -P INPUT ACCEPT\nsudo iptables -P FORWARD ACCEPT\nsudo iptables -P OUTPUT ACCEPT\n\n# Save rules persistently\nsudo apt-get install iptables-persistent\nsudo iptables-save | sudo tee /etc/iptables/rules.v4\n\n# Restore saved rules\nsudo iptables-restore &lt; /etc/iptables/rules.v4\n\n# NAT / Masquerade\nsudo iptables -t nat -A POSTROUTING -j MASQUERADE\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#lvm-resize","title":"LVM Resize","text":"","tags":["Linux"]},{"location":"setup_linux/#remove-local-lvm-and-extend-root","title":"Remove local-lvm and Extend Root","text":"<p>Useful on Proxmox or similar setups where <code>local-lvm</code> is unused:</p> <pre><code># Remove the data logical volume\nlvremove /dev/pve/data\n\n# Option A: Give 50% free space to root, keep rest for new LV\nlvresize -l +50%FREE /dev/pve/root\nresize2fs /dev/mapper/pve-root\n\n# Option B: Give ALL free space to root\nlvresize -l +100%FREE /dev/pve/root\nresize2fs /dev/mapper/pve-root\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#recreate-a-thin-pool-if-needed","title":"Recreate a Thin Pool (if needed)","text":"<pre><code>lvcreate -l 100%FREE --poolmetadatasize 1024M --chunksize 256 -T -n data pve\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#password-generation-and-hashing","title":"Password Generation and Hashing","text":"","tags":["Linux"]},{"location":"setup_linux/#install-required-tools","title":"Install Required Tools","text":"<pre><code>sudo apt update &amp;&amp; sudo apt install -y apache2-utils\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#generate-hashed-password-htpasswd","title":"Generate Hashed Password (htpasswd)","text":"<pre><code># Generate bcrypt hash\nhtpasswd -nbBC 10 \"\" \"your_password_here\" | tr -d ':\\n'\n\n# Generate APR1 hash (for traefik, nginx basic auth)\necho $(htpasswd -nb \"your_username\" \"your_password_here\") | sed -e s/\\\\$/\\\\$\\\\$/g\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#generate-random-password","title":"Generate Random Password","text":"<pre><code># Using openssl\nopenssl rand -base64 24\n\n# Using /dev/urandom\ntr -dc 'A-Za-z0-9!@#$%' &lt; /dev/urandom | head -c 32; echo\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#diagnostic-tools","title":"Diagnostic Tools","text":"<pre><code># System resources\nhtop                          # Interactive process viewer\nfree -h                       # Memory usage\ndf -h                         # Disk usage\ndu -sh /path/to/dir           # Directory size\n\n# Network diagnostics\nip addr show                  # Show IP addresses\nip route show                 # Show routing table\nping -c 4 10.0.0.1            # Test connectivity\ntraceroute 10.0.0.1           # Trace network path\ntcpdump -i eth0 port 80       # Capture packets\nss -tulnp                     # Show listening ports\ncurl -4 icanhazip.com         # Get public IP\n\n# System information\nuname -a                      # Kernel info\nneofetch                      # System summary\nlsblk                         # Block devices\nlscpu                         # CPU info\n</code></pre>","tags":["Linux"]},{"location":"setup_linux/#ssl-certificate-generation-self-signed","title":"SSL Certificate Generation (Self-Signed)","text":"<pre><code>sudo openssl req -x509 -nodes -days 365 \\\n  -newkey rsa:2048 -sha256 \\\n  -keyout /etc/ssl/private/selfsigned.key \\\n  -out /etc/ssl/certs/selfsigned.crt \\\n  -subj \"/CN=server.example.com\" \\\n  -addext \"subjectAltName=DNS:server.example.com\"\n</code></pre>","tags":["Linux"]},{"location":"setup_llm/","title":"LLM & GPU","text":"","tags":["LLM","GPU"]},{"location":"setup_llm/#local-llm-setup-guide","title":"Local LLM Setup Guide","text":"<p>A guide for running large language models locally using NVIDIA GPU passthrough, Ollama, and Open WebUI.</p>","tags":["LLM","GPU"]},{"location":"setup_llm/#nvidia-driver-installation-ubuntu","title":"NVIDIA Driver Installation (Ubuntu)","text":"","tags":["LLM","GPU"]},{"location":"setup_llm/#add-driver-repository","title":"Add Driver Repository","text":"<pre><code>sudo add-apt-repository ppa:graphics-drivers/ppa\nsudo apt update\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#install-driver","title":"Install Driver","text":"<pre><code># Install specific version\nsudo apt install nvidia-driver-570\n\n# Or use auto-detection\nsudo ubuntu-drivers autoinstall\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#reboot-and-verify","title":"Reboot and Verify","text":"<pre><code>sudo reboot\n</code></pre> <p>After reboot:</p> <pre><code># Check GPU status\nnvidia-smi\n\n# Load NVIDIA module\nsudo modprobe nvidia\n\n# Detailed GPU info\nlspci -v | grep -A 12 NVIDIA\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#gpu-passthrough-verification-proxmox-vms","title":"GPU Passthrough Verification (Proxmox VMs)","text":"","tags":["LLM","GPU"]},{"location":"setup_llm/#check-iommu-status","title":"Check IOMMU Status","text":"<pre><code>dmesg | grep -i iommu\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#check-vfio-configuration","title":"Check VFIO Configuration","text":"<pre><code>cat /etc/default/grub | grep iommu\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#secureboot-status","title":"SecureBoot Status","text":"<pre><code>mokutil --sb-state\n</code></pre> <p>Note: If SecureBoot is enabled, you may need to disable it for NVIDIA drivers to load: </p><pre><code>sudo apt install mokutil\nsudo mokutil --disable-validation\n</code></pre><p></p>","tags":["LLM","GPU"]},{"location":"setup_llm/#driver-verification","title":"Driver Verification","text":"<pre><code>modinfo nvidia | grep version\ndkms status\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#monitor-gpu-in-real-time","title":"Monitor GPU in Real-Time","text":"<pre><code>watch -n 0.5 nvidia-smi\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#ollama-installation","title":"Ollama Installation","text":"","tags":["LLM","GPU"]},{"location":"setup_llm/#install-ollama","title":"Install Ollama","text":"<pre><code>curl -fsSL https://ollama.com/install.sh | sh\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#basic-usage","title":"Basic Usage","text":"<pre><code># List installed models\nollama list\n\n# Run a model\nollama run llama3.1:8b\n\n# Stop a running model\nollama stop llama3.1:8b\n\n# Pull a model without running\nollama pull deepseek-r1:14b\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#open-webui-docker","title":"Open WebUI (Docker)","text":"<p>Open WebUI provides a ChatGPT-like interface for Ollama models.</p>","tags":["LLM","GPU"]},{"location":"setup_llm/#default-setup-ollama-on-same-machine","title":"Default Setup (Ollama on Same Machine)","text":"<pre><code>docker run -d -p 3000:8080 \\\n  --add-host=host.docker.internal:host-gateway \\\n  -v open-webui:/app/backend/data \\\n  --name open-webui \\\n  --restart always \\\n  ghcr.io/open-webui/open-webui:main\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#remote-ollama-server","title":"Remote Ollama Server","text":"<pre><code>docker run -d -p 3000:8080 \\\n  -e OLLAMA_BASE_URL=https://ollama.example.com \\\n  -v open-webui:/app/backend/data \\\n  --name open-webui \\\n  --restart always \\\n  ghcr.io/open-webui/open-webui:main\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#with-nvidia-gpu-support","title":"With NVIDIA GPU Support","text":"<pre><code>docker run -d -p 3000:8080 \\\n  --gpus all \\\n  --add-host=host.docker.internal:host-gateway \\\n  -v open-webui:/app/backend/data \\\n  --name open-webui \\\n  --restart always \\\n  ghcr.io/open-webui/open-webui:cuda\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#openai-api-only","title":"OpenAI API Only","text":"<pre><code>docker run -d -p 3000:8080 \\\n  -e OPENAI_API_KEY=your_api_token_here \\\n  -v open-webui:/app/backend/data \\\n  --name open-webui \\\n  --restart always \\\n  ghcr.io/open-webui/open-webui:main\n</code></pre>","tags":["LLM","GPU"]},{"location":"setup_llm/#bundled-ollama-webui-in-one-container","title":"Bundled (Ollama + WebUI in One Container)","text":"<p>With GPU: </p><pre><code>docker run -d -p 3000:8080 \\\n  --gpus=all \\\n  -v ollama:/root/.ollama \\\n  -v open-webui:/app/backend/data \\\n  --name open-webui \\\n  --restart always \\\n  ghcr.io/open-webui/open-webui:ollama\n</code></pre><p></p> <p>CPU Only: </p><pre><code>docker run -d -p 3000:8080 \\\n  -v ollama:/root/.ollama \\\n  -v open-webui:/app/backend/data \\\n  --name open-webui \\\n  --restart always \\\n  ghcr.io/open-webui/open-webui:ollama\n</code></pre><p></p>","tags":["LLM","GPU"]},{"location":"setup_llm/#access","title":"Access","text":"<p>Open your browser and navigate to:</p> <pre><code>http://server.example.com:3000\n</code></pre> <p>Create an admin account on first login.</p>","tags":["LLM","GPU"]},{"location":"setup_packer/","title":"Packer","text":"","tags":["DevOps","Packer"]},{"location":"setup_packer/#packer-setup-guide","title":"Packer Setup Guide","text":"<p>A guide for installing HashiCorp Packer and creating automated machine images for various platforms.</p>","tags":["DevOps","Packer"]},{"location":"setup_packer/#what-is-packer","title":"What is Packer?","text":"<p>Packer is a tool for building identical machine images for multiple platforms from a single source configuration. It automates the creation of VM templates, cloud images, and container images.</p>","tags":["DevOps","Packer"]},{"location":"setup_packer/#installation","title":"Installation","text":"","tags":["DevOps","Packer"]},{"location":"setup_packer/#ubuntu-debian","title":"Ubuntu / Debian","text":"<pre><code>wget -O- https://apt.releases.hashicorp.com/gpg | \\\n  gpg --dearmor | \\\n  sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg &gt; /dev/null\n\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \\\n  https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | \\\n  sudo tee /etc/apt/sources.list.d/hashicorp.list\n\nsudo apt-get update &amp;&amp; sudo apt-get install packer\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#rhel-centos","title":"RHEL / CentOS","text":"<pre><code>sudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo yum -y install packer\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#verify-installation","title":"Verify Installation","text":"<pre><code>packer --version\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#format-and-validate","title":"Format and Validate","text":"","tags":["DevOps","Packer"]},{"location":"setup_packer/#format-hcl-files","title":"Format HCL Files","text":"<pre><code>packer fmt template.pkr.hcl\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#validate-configuration","title":"Validate Configuration","text":"<pre><code>packer validate template.pkr.hcl\n\n# With variable file\npacker validate -var-file variables.pkrvars.hcl template.pkr.hcl\n</code></pre> <p>Tip: Always run <code>fmt</code> and <code>validate</code> before building.</p>","tags":["DevOps","Packer"]},{"location":"setup_packer/#boot-commands-reference","title":"Boot Commands Reference","text":"<p>Boot commands simulate keyboard input during OS installation. They vary by distribution and version.</p>","tags":["DevOps","Packer"]},{"location":"setup_packer/#ubuntu-2404-autoinstall","title":"Ubuntu 24.04 (Autoinstall)","text":"<pre><code>boot_command = [\n  \"&lt;wait3s&gt;c&lt;wait3s&gt;\",\n  \"linux /casper/vmlinuz --- autoinstall ds=nocloud-net;s=http://{{ .HTTPIP }}:{{ .HTTPPort }}/\",\n  \"&lt;enter&gt;&lt;wait&gt;\",\n  \"initrd /casper/initrd\",\n  \"&lt;enter&gt;&lt;wait&gt;\",\n  \"boot\",\n  \"&lt;enter&gt;\"\n]\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#ubuntu-2204-autoinstall","title":"Ubuntu 22.04 (Autoinstall)","text":"<pre><code>boot_command = [\n  \"&lt;esc&gt;&lt;wait&gt;\",\n  \"e&lt;wait&gt;\",\n  \"&lt;down&gt;&lt;down&gt;&lt;down&gt;&lt;end&gt;\",\n  \"&lt;bs&gt;&lt;bs&gt;&lt;bs&gt;&lt;bs&gt;&lt;wait&gt;\",\n  \"autoinstall ds=nocloud-net\\\\;s=http://{{ .HTTPIP }}:{{ .HTTPPort }}/ ---&lt;wait&gt;\",\n  \"&lt;f10&gt;&lt;wait&gt;\"\n]\nboot      = \"c\"\nboot_wait = \"5s\"\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#ubuntu-2004-autoinstall","title":"Ubuntu 20.04 (Autoinstall)","text":"<pre><code>boot_command = [\n  \"&lt;esc&gt;&lt;wait&gt;&lt;esc&gt;&lt;wait&gt;\",\n  \"&lt;f6&gt;&lt;wait&gt;&lt;esc&gt;&lt;wait&gt;\",\n  \"&lt;bs&gt;&lt;bs&gt;&lt;bs&gt;&lt;bs&gt;&lt;bs&gt;\",\n  \"autoinstall ds=nocloud-net;s=http://{{ .HTTPIP }}:{{ .HTTPPort }}/ \",\n  \"--- &lt;enter&gt;\"\n]\nboot      = \"c\"\nboot_wait = \"5s\"\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#debian-12-preseed","title":"Debian 12 (Preseed)","text":"<pre><code>boot_command = [\n  \"&lt;esc&gt;&lt;wait&gt;\",\n  \"auto console-setup/ask_detect=false \",\n  \"debconf/frontend=noninteractive fb=false \",\n  \"url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg\",\n  \"&lt;enter&gt;\"\n]\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#debian-10-preseed","title":"Debian 10 (Preseed)","text":"<pre><code>boot_command = [\n  \"&lt;esc&gt;&lt;wait&gt;\",\n  \"auto install \",\n  \"console-keymaps-at/keymap=us console-setup/ask_detect=false \",\n  \"debconf/frontend=noninteractive \",\n  \"url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg\",\n  \"&lt;enter&gt;&lt;wait&gt;\"\n]\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#proxmox-builder-overview","title":"Proxmox Builder (Overview)","text":"","tags":["DevOps","Packer"]},{"location":"setup_packer/#example-template","title":"Example Template","text":"<pre><code>packer {\n  required_plugins {\n    proxmox = {\n      version = \"&gt;= 1.1.0\"\n      source  = \"github.com/hashicorp/proxmox\"\n    }\n  }\n}\n\nsource \"proxmox-iso\" \"ubuntu\" {\n  proxmox_url              = \"https://proxmox.example.com:8006/api2/json\"\n  username                 = \"your_username@pam!packer\"\n  token                    = \"your_api_token_here\"\n  insecure_skip_tls_verify = true\n\n  node                 = \"pve\"\n  vm_name              = \"ubuntu-template\"\n  template_description = \"Ubuntu 24.04 template built by Packer\"\n\n  iso_file    = \"local:iso/ubuntu-24.04-live-server-amd64.iso\"\n  unmount_iso = true\n\n  cores  = 2\n  memory = 2048\n\n  disks {\n    storage_pool = \"local-lvm\"\n    disk_size    = \"20G\"\n    type         = \"scsi\"\n  }\n\n  network_adapters {\n    bridge = \"vmbr0\"\n    model  = \"virtio\"\n  }\n\n  http_directory = \"http\"\n  ssh_username   = \"your_username\"\n  ssh_password   = \"your_password_here\"\n  ssh_timeout    = \"20m\"\n}\n\nbuild {\n  sources = [\"source.proxmox-iso.ubuntu\"]\n\n  provisioner \"shell\" {\n    inline = [\n      \"sudo apt-get update\",\n      \"sudo apt-get upgrade -y\",\n      \"sudo apt-get install -y qemu-guest-agent\",\n      \"sudo systemctl enable qemu-guest-agent\"\n    ]\n  }\n}\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#variable-files-and-credentials","title":"Variable Files and Credentials","text":"","tags":["DevOps","Packer"]},{"location":"setup_packer/#variablespkrvarshcl","title":"variables.pkrvars.hcl","text":"<pre><code>proxmox_url      = \"https://proxmox.example.com:8006/api2/json\"\nproxmox_username = \"your_username@pam!packer\"\nproxmox_token    = \"your_api_token_here\"\nssh_username     = \"your_username\"\nssh_password     = \"your_password_here\"\n</code></pre> <p>Warning: Never commit variable files with credentials to git. Add to <code>.gitignore</code>: </p><pre><code>*.pkrvars.hcl\n*.auto.pkrvars.hcl\n</code></pre><p></p>","tags":["DevOps","Packer"]},{"location":"setup_packer/#use-environment-variables-instead","title":"Use Environment Variables Instead","text":"<pre><code>export PKR_VAR_proxmox_token=\"your_api_token_here\"\nexport PKR_VAR_ssh_password=\"your_password_here\"\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_packer/#build-workflow","title":"Build Workflow","text":"<pre><code># Initialize plugins\npacker init template.pkr.hcl\n\n# Format\npacker fmt template.pkr.hcl\n\n# Validate\npacker validate -var-file variables.pkrvars.hcl template.pkr.hcl\n\n# Build\npacker build -var-file variables.pkrvars.hcl template.pkr.hcl\n</code></pre>","tags":["DevOps","Packer"]},{"location":"setup_proxmox/","title":"Proxmox VE","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#proxmox-ve-setup-guide","title":"Proxmox VE Setup Guide","text":"<p>A comprehensive guide for Proxmox Virtual Environment configuration, optimization, and management.</p>","tags":["Proxmox"]},{"location":"setup_proxmox/#post-install-setup","title":"Post-Install Setup","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#remove-subscription-notice-and-update-repositories","title":"Remove Subscription Notice and Update Repositories","text":"<p>Run the community post-install script or configure manually:</p> <pre><code># Add no-subscription repository\necho \"deb http://download.proxmox.com/debian/pve $(grep 'VERSION_CODENAME' /etc/os-release | cut -d= -f2) pve-no-subscription\" \\\n  | tee /etc/apt/sources.list.d/pve-no-subscription.list\n\n# Disable enterprise repository\nsed -i 's/^deb/#deb/' /etc/apt/sources.list.d/pve-enterprise.list\n\n# Update system\napt-get update &amp;&amp; apt-get dist-upgrade -y\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#network-configuration","title":"Network Configuration","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#edit-network-interfaces","title":"Edit Network Interfaces","text":"<pre><code>nano /etc/network/interfaces\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#bridge-configuration-standard","title":"Bridge Configuration (Standard)","text":"<pre><code>auto vmbr0\niface vmbr0 inet static\n    address 10.0.0.100/24\n    gateway 10.0.0.1\n    bridge_ports eth0\n    bridge_stp off\n    bridge_fd 0\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#vlan-configuration","title":"VLAN Configuration","text":"<pre><code>auto vmbr1\niface vmbr1 inet static\n    address 10.0.1.100/24\n    gateway 10.0.1.1\n    bridge_ports eth0.10\n    bridge_stp off\n    bridge_fd 0\n    vlan-raw-device eth0\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#apply-network-changes","title":"Apply Network Changes","text":"<pre><code># Standard restart\nsystemctl restart networking\n\n# Without full restart\nifreload -a\n\n# Restart a specific bridge\nifdown vmbr0 &amp;&amp; ifup vmbr0\n</code></pre> <p>Warning: Changing IP remotely via SSH may disconnect you. Ensure you have console access (IPMI, physical) before modifying network settings.</p>","tags":["Proxmox"]},{"location":"setup_proxmox/#verify-configuration","title":"Verify Configuration","text":"<pre><code>ip addr show\nping -c 4 10.0.0.1\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#zfs-optimization-for-ssd","title":"ZFS Optimization for SSD","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#disable-unnecessary-ha-services-single-node","title":"Disable Unnecessary HA Services (Single Node)","text":"<pre><code>systemctl disable pve-ha-lrm.service\nsystemctl disable pve-ha-crm.service\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#store-logs-in-ram","title":"Store Logs in RAM","text":"<p>Edit <code>/etc/systemd/journald.conf</code>:</p> <pre><code>[Journal]\nStorage=volatile\n</code></pre> <pre><code>systemctl restart systemd-journald\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#enable-autotrim","title":"Enable Autotrim","text":"<pre><code>zpool set autotrim=on rpool\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#disable-atime","title":"Disable atime","text":"<pre><code>zfs set atime=off rpool\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#use-raw-disk-images","title":"Use Raw Disk Images","text":"<pre><code>qm set &lt;VMID&gt; --scsihw virtio-scsi-pci --virtio0 /dev/zvol/rpool/vm-&lt;VMID&gt;-disk-0\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#keep-pool-below-80-capacity","title":"Keep Pool Below 80% Capacity","text":"<p>ZFS performance degrades significantly above 80% usage. Monitor regularly:</p> <pre><code>zpool list\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#zram-instead-of-swap-on-ssd","title":"ZRAM Instead of Swap on SSD","text":"<pre><code>apt install zram-tools -y\nsystemctl enable --now zramswap.service\n\n# Verify ZRAM is active\nswapon --show\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#monitoring","title":"Monitoring","text":"<pre><code># Check SSD wear\nsmartctl -a /dev/sda\n\n# Real-time ZFS I/O\nwatch -n 1 zpool iostat rpool\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#firewall-configuration","title":"Firewall Configuration","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#enable-firewall","title":"Enable Firewall","text":"<pre><code>pvecm set --firewall 1\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#add-rules-via-cli","title":"Add Rules via CLI","text":"<pre><code># Allow SSH on VM 101\npvesh set /cluster/firewall/rules \\\n  -type in -action accept -dport 22\n\n# View rules\npvesh get /nodes/&lt;node_name&gt;/firewall/rules\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#firewall-config-file","title":"Firewall Config File","text":"<pre><code>nano /etc/pve/firewall/cluster.fw\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#disk-passthrough-hddssd-to-vm","title":"Disk Passthrough (HDD/SSD to VM)","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#identify-disks-by-id","title":"Identify Disks by ID","text":"<pre><code>ls -l /dev/disk/by-id/ | grep -v part\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#attach-disk-to-vm","title":"Attach Disk to VM","text":"<pre><code># Attach disk by-id to VM (recommended over /dev/sdX)\nqm set &lt;VMID&gt; -scsi1 /dev/disk/by-id/ata-VENDOR_MODEL_SERIAL\nqm set &lt;VMID&gt; -scsi2 /dev/disk/by-id/ata-VENDOR_MODEL_SERIAL\n</code></pre> <p>Important: Always use <code>/dev/disk/by-id/</code> paths instead of <code>/dev/sdX</code> as device letters can change after reboot.</p>","tags":["Proxmox"]},{"location":"setup_proxmox/#list-hardware","title":"List Hardware","text":"<pre><code>lshw -class disk -class storage\nlshw -C disk\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#gpu-passthrough","title":"GPU Passthrough","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#grub-configuration-for-iommu","title":"GRUB Configuration for IOMMU","text":"<p>Edit <code>/etc/default/grub</code>:</p> <p>Intel CPU: </p><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on iommu=pt\"\n</code></pre><p></p> <p>AMD CPU: </p><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet amd_iommu=on\"\n</code></pre><p></p> <pre><code>update-grub\nreboot\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#verify-iommu","title":"Verify IOMMU","text":"<pre><code>dmesg | grep -i iommu\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#ceph-storage-cluster","title":"Ceph Storage Cluster","text":"<p>Note: Only configure Ceph after establishing a reliable network mesh between nodes.</p>","tags":["Proxmox"]},{"location":"setup_proxmox/#install-ceph-all-nodes","title":"Install Ceph (All Nodes)","text":"<pre><code>pveceph install --repository no-subscription\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#initialize-ceph-first-node","title":"Initialize Ceph (First Node)","text":"<pre><code>pveceph init --network 10.0.0.0/24\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#create-monitors","title":"Create Monitors","text":"<pre><code># Node 1\npveceph mon create --mon-address 10.0.0.1\n\n# Node 2\npveceph mon create --mon-address 10.0.0.2\n\n# Node 3\npveceph mon create --mon-address 10.0.0.3\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#add-managers","title":"Add Managers","text":"<p>Via GUI: <code>Datacenter &gt; Node &gt; Ceph &gt; Monitor &gt; Create Manager</code></p>","tags":["Proxmox"]},{"location":"setup_proxmox/#add-osds","title":"Add OSDs","text":"<p>Via GUI: <code>Datacenter &gt; Node &gt; Ceph &gt; OSD &gt; Create OSD</code></p> <p>Tip: If no disks are available, wipe old filesystems via <code>Datacenter &gt; Node &gt; Disks</code>.</p>","tags":["Proxmox"]},{"location":"setup_proxmox/#create-pool","title":"Create Pool","text":"<p>Via GUI: <code>Datacenter &gt; Node &gt; Ceph &gt; Pools &gt; Create</code></p> <p>Example pool name: <code>vm-disks</code></p>","tags":["Proxmox"]},{"location":"setup_proxmox/#configure-ha","title":"Configure HA","text":"<ol> <li>Set <code>Cluster Resource Scheduling</code> to <code>ha-rebalance-on-start=1</code></li> <li>Set <code>HA Settings &gt; shutdown_policy</code> to <code>migrate</code></li> <li>Leave migration settings as default</li> </ol>","tags":["Proxmox"]},{"location":"setup_proxmox/#batch-vm-management","title":"Batch VM Management","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#delete-multiple-vms-in-a-loop","title":"Delete Multiple VMs in a Loop","text":"<pre><code>for i in $(seq 9001 9050); do\n    if qm list | awk '{print $1}' | grep -q \"^$i$\"; then\n        echo \"Deleting VM $i\"\n        qm destroy $i --purge --skiplock\n    fi\ndone\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#preview-only-dry-run","title":"Preview Only (Dry Run)","text":"<pre><code>for i in $(seq 9001 9050); do\n    if qm list | awk '{print $1}' | grep -q \"^$i$\"; then\n        echo \"Would delete VM $i\"\n    fi\ndone\n</code></pre>","tags":["Proxmox"]},{"location":"setup_proxmox/#upgrade-proxmox-8x-to-9x","title":"Upgrade Proxmox (8.x to 9.x)","text":"","tags":["Proxmox"]},{"location":"setup_proxmox/#prerequisites","title":"Prerequisites","text":"<ul> <li>Proxmox VE 8.4.1 or higher</li> <li>At least 10GB free disk space</li> <li>Root access</li> <li>Internet connectivity</li> </ul>","tags":["Proxmox"]},{"location":"setup_proxmox/#upgrade-steps","title":"Upgrade Steps","text":"<ol> <li> <p>Update current installation: </p><pre><code>apt update &amp;&amp; apt dist-upgrade -y\n</code></pre><p></p> </li> <li> <p>Run pre-upgrade checks: </p><pre><code>pve8to9 --full\n</code></pre><p></p> </li> <li> <p>Update repositories for PVE 9: </p><pre><code>sed -i 's/bookworm/trixie/g' /etc/apt/sources.list\nsed -i 's/bookworm/trixie/g' /etc/apt/sources.list.d/*.list\n</code></pre><p></p> </li> <li> <p>Perform the upgrade: </p><pre><code>apt update &amp;&amp; apt dist-upgrade -y\n</code></pre><p></p> </li> <li> <p>Reboot: </p><pre><code>systemctl reboot\n</code></pre><p></p> </li> </ol> <p>Warning: Always create backups before upgrading. Test on a non-production node first. Known issues include GRUB UEFI changes and network interface naming changes.</p>","tags":["Proxmox"]},{"location":"setup_ssh/","title":"SSH Keys","text":"","tags":["Linux","SSH"]},{"location":"setup_ssh/#setting-up-ssh-keys","title":"Setting Up SSH Keys","text":"<p>Follow the steps below to set up SSH keys:</p>","tags":["Linux","SSH"]},{"location":"setup_ssh/#1-create-the-ssh-directory","title":"1. Create the <code>.ssh</code> Directory","text":"<pre><code>mkdir -p ~/.ssh\ncd ~/.ssh\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#2-generate-an-ssh-key-pair","title":"2. Generate an SSH Key Pair","text":"<pre><code>ssh-keygen -b 4096 -t rsa -f my-server-key\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#3-add-the-public-key-to-authorized_keys","title":"3. Add the Public Key to <code>authorized_keys</code>","text":"<p>You can use one of the following methods:</p>","tags":["Linux","SSH"]},{"location":"setup_ssh/#method-1-append-the-key","title":"Method 1: Append the Key","text":"<pre><code>cat ~/.ssh/my-server-key.pub &gt;&gt; ~/.ssh/authorized_keys\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#method-2-echo-the-key","title":"Method 2: Echo the Key","text":"<p>Replace <code>YOUR_PUBLIC_KEY</code> with your actual public key: </p><pre><code>echo \"YOUR_PUBLIC_KEY\" &gt;&gt; ~/.ssh/authorized_keys\n</code></pre><p></p>","tags":["Linux","SSH"]},{"location":"setup_ssh/#4-set-permissions","title":"4. Set Permissions","text":"<pre><code>chmod 600 ~/.ssh/authorized_keys\nchmod 700 ~/.ssh\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#5-install-putty-tools","title":"5. Install <code>putty-tools</code>","text":"<pre><code>sudo apt install putty-tools\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#6-convert-the-private-key-to-ppk-format","title":"6. Convert the Private Key to PPK Format","text":"<pre><code>puttygen ~/my-server-key -o ~/.ssh/my-server-key.ppk\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#7-copy-keys-to-the-ubuntu-users-home-directory","title":"7. Copy Keys to the <code>ubuntu</code> User's Home Directory","text":"<pre><code>sudo cp my-server-key /home/ubuntu/\nsudo cp my-server-key.pub /home/ubuntu/\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_ssh/#8-change-ownership-of-the-keys","title":"8. Change Ownership of the Keys","text":"<pre><code>sudo chown ubuntu:ubuntu /home/ubuntu/my-server-key\nsudo chown ubuntu:ubuntu /home/ubuntu/my-server-key.pub\n</code></pre>","tags":["Linux","SSH"]},{"location":"setup_tailscale/","title":"Tailscale","text":"","tags":["Security","VPN"]},{"location":"setup_tailscale/#tailscale-setup-guide","title":"Tailscale Setup Guide","text":"<p>A guide for installing and configuring Tailscale as a mesh VPN, including subnet routing, exit nodes, and Docker integration.</p>","tags":["Security","VPN"]},{"location":"setup_tailscale/#installation","title":"Installation","text":"<pre><code>curl -fsSL https://tailscale.com/install.sh | sh\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#basic-setup","title":"Basic Setup","text":"","tags":["Security","VPN"]},{"location":"setup_tailscale/#start-tailscale","title":"Start Tailscale","text":"<pre><code>sudo tailscale up\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#check-status","title":"Check Status","text":"<pre><code>tailscale status\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#authenticate","title":"Authenticate","text":"<p>Follow the printed URL to authenticate the device in the Tailscale admin console at https://login.tailscale.com.</p>","tags":["Security","VPN"]},{"location":"setup_tailscale/#subnet-router","title":"Subnet Router","text":"<p>Advertise local network routes so other Tailscale nodes can reach devices on this network.</p>","tags":["Security","VPN"]},{"location":"setup_tailscale/#enable-ip-forwarding","title":"Enable IP Forwarding","text":"<pre><code>echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.d/99-tailscale.conf\necho 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.d/99-tailscale.conf\nsudo sysctl -p /etc/sysctl.d/99-tailscale.conf\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#advertise-routes","title":"Advertise Routes","text":"<pre><code>sudo tailscale up --advertise-routes=10.0.0.0/24 --accept-routes\n</code></pre> <p>Important: After advertising routes, approve them in the Tailscale admin console under the machine's route settings.</p>","tags":["Security","VPN"]},{"location":"setup_tailscale/#exit-node","title":"Exit Node","text":"<p>Allow other Tailscale devices to route all internet traffic through this machine.</p> <pre><code>sudo tailscale up --advertise-routes=10.0.0.0/24 --accept-routes --advertise-exit-node\n</code></pre> <p>Approve the exit node in the Tailscale admin console.</p>","tags":["Security","VPN"]},{"location":"setup_tailscale/#use-an-exit-node-client-side","title":"Use an Exit Node (Client Side)","text":"<pre><code>sudo tailscale up --exit-node=&lt;exit_node_ip&gt;\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#udp-gro-forwarding-performance","title":"UDP GRO Forwarding (Performance)","text":"<p>Optimize network performance for forwarding:</p> <pre><code>NETDEV=$(ip route show 0/0 | awk 'NR==1 {print $5}')\nsudo ethtool -K $NETDEV rx-udp-gro-forwarding on\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#make-persistent-via-networkd-dispatcher","title":"Make Persistent via NetworkD Dispatcher","text":"<pre><code>cat &lt;&lt; 'EOF' | sudo tee /etc/networkd-dispatcher/routable.d/50-tailscale\n#!/bin/sh\nNETDEV=$(ip route show 0/0 | awk 'NR==1 {print $5}')\nethtool -K $NETDEV rx-udp-gro-forwarding on rx-gro off\nEOF\n\nsudo chmod 755 /etc/networkd-dispatcher/routable.d/50-tailscale\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#docker-tailscale-integration","title":"Docker + Tailscale Integration","text":"","tags":["Security","VPN"]},{"location":"setup_tailscale/#problem-stateful-filtering-warning","title":"Problem: Stateful Filtering Warning","text":"<p>When running Docker alongside Tailscale, you may see:</p> <pre><code>Warning: Stateful filtering is enabled and Docker was detected;\nthis may prevent Docker containers on this host from connecting to Tailscale nodes.\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#solution-1-iptables-rules-recommended","title":"Solution 1: IPTables Rules (Recommended)","text":"<pre><code>sudo iptables -I DOCKER-USER -i tailscale0 -j ACCEPT\nsudo iptables -I DOCKER-USER -o tailscale0 -j ACCEPT\nsudo iptables -A FORWARD -i docker0 -o tailscale0 -j ACCEPT\nsudo iptables -A FORWARD -i tailscale0 -o docker0 -j ACCEPT\n\n# Save rules persistently\nsudo apt install -y iptables-persistent\nsudo iptables-save | sudo tee /etc/iptables/rules.v4\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#solution-2-docker-daemon-configuration","title":"Solution 2: Docker Daemon Configuration","text":"<p>Edit <code>/etc/docker/daemon.json</code>:</p> <pre><code>{\n  \"dns\": [\"1.1.1.1\", \"8.8.8.8\"],\n  \"iptables\": false,\n  \"bridge\": \"none\"\n}\n</code></pre> <pre><code>sudo systemctl restart docker\n</code></pre> <p>Warning: Disabling Docker's iptables management means you lose Docker's built-in network isolation. Use Solution 1 unless you have specific reasons.</p>","tags":["Security","VPN"]},{"location":"setup_tailscale/#auto-update","title":"Auto-Update","text":"<pre><code>sudo tailscale set --auto-update\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#troubleshooting","title":"Troubleshooting","text":"","tags":["Security","VPN"]},{"location":"setup_tailscale/#restart-tailscale","title":"Restart Tailscale","text":"<pre><code>sudo systemctl restart tailscaled\ntailscale status\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#check-daemon-logs","title":"Check Daemon Logs","text":"<pre><code>sudo journalctl -u tailscaled -f\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_tailscale/#subnet-routing-issues","title":"Subnet Routing Issues","text":"<p>If subnet routes are not working:</p> <ol> <li> <p>Verify IP forwarding is enabled: </p><pre><code>sysctl net.ipv4.ip_forward\n</code></pre><p></p> </li> <li> <p>Verify routes are approved in admin console</p> </li> <li> <p>Try with explicit flags: </p><pre><code>sudo tailscale up \\\n  --advertise-routes=10.0.0.0/24 \\\n  --accept-routes \\\n  --snat-subnet-routes=false\n</code></pre><p></p> </li> </ol>","tags":["Security","VPN"]},{"location":"setup_tailscale/#docker-not-restarting","title":"Docker Not Restarting","text":"<p>If Docker fails to restart after editing <code>daemon.json</code>:</p> <pre><code># Check for JSON syntax errors\npython3 -c \"import json; json.load(open('/etc/docker/daemon.json'))\"\n\n# Check Docker logs\nsudo journalctl -xeu docker.service\n</code></pre>","tags":["Security","VPN"]},{"location":"setup_terraform/","title":"Terraform","text":"","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#terraform-setup-guide","title":"Terraform Setup Guide","text":"<p>A guide for installing Terraform and configuring it for infrastructure as code workflows.</p>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#installation","title":"Installation","text":"","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#ubuntu-debian","title":"Ubuntu / Debian","text":"<pre><code>sudo apt-get update &amp;&amp; sudo apt-get install -y gnupg software-properties-common\n\nwget -O- https://apt.releases.hashicorp.com/gpg | \\\n  gpg --dearmor | \\\n  sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg &gt; /dev/null\n\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \\\n  https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | \\\n  sudo tee /etc/apt/sources.list.d/hashicorp.list\n\nsudo apt-get update &amp;&amp; sudo apt-get install terraform\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#rhel-centos","title":"RHEL / CentOS","text":"<pre><code>sudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo\nsudo yum -y install terraform\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#verify-installation","title":"Verify Installation","text":"<pre><code>terraform --version\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#terraform-cloud-setup","title":"Terraform Cloud Setup","text":"","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#generate-api-token","title":"Generate API Token","text":"<ol> <li>Go to Terraform Cloud</li> <li>Navigate to User Settings &gt; Tokens &gt; API Tokens</li> <li>Create a new token</li> </ol>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#configure-token-on-server","title":"Configure Token on Server","text":"<pre><code>mkdir -p ~/.terraform.d\n\ncat &gt; ~/.terraform.d/credentials.tfrc.json &lt;&lt; 'EOF'\n{\n    \"credentials\": {\n        \"app.terraform.io\": {\n            \"token\": \"your_api_token_here\"\n        }\n    }\n}\nEOF\n\nchmod 600 ~/.terraform.d/credentials.tfrc.json\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#workflow","title":"Workflow","text":"","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#initialize","title":"Initialize","text":"<pre><code>terraform init\n</code></pre> <p>Downloads providers and modules, sets up the backend.</p>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#plan","title":"Plan","text":"<pre><code>terraform plan\n</code></pre> <p>Shows what changes will be made without applying them.</p>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#apply","title":"Apply","text":"<pre><code>terraform apply\n</code></pre> <p>Applies the planned changes. Add <code>-auto-approve</code> to skip confirmation (use with caution).</p>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#destroy","title":"Destroy","text":"<pre><code>terraform destroy\n</code></pre> <p>Removes all resources managed by the configuration.</p>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#format-and-validate","title":"Format and Validate","text":"","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#format-hcl-files","title":"Format HCL Files","text":"<pre><code># Format a single file\nterraform fmt main.tf\n\n# Format all files recursively\nterraform fmt -recursive\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#validate-configuration","title":"Validate Configuration","text":"<pre><code>terraform validate\n</code></pre> <p>Tip: Always run <code>fmt</code> and <code>validate</code> before <code>plan</code> to catch syntax issues early.</p>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#batch-format-and-validate-packer-example","title":"Batch Format and Validate (Packer Example)","text":"<pre><code>#!/bin/bash\n# Format all Packer HCL files\nfor dir in */; do\n  if [ -f \"${dir}packer.pkr.hcl\" ]; then\n    packer fmt \"${dir}packer.pkr.hcl\"\n    packer validate -var-file variables.pkrvars.hcl \"${dir}packer.pkr.hcl\"\n  fi\ndone\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#proxmox-provider-example","title":"Proxmox Provider (Example)","text":"","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#provider-configuration","title":"Provider Configuration","text":"<pre><code>terraform {\n  required_providers {\n    proxmox = {\n      source  = \"telmate/proxmox\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n\nprovider \"proxmox\" {\n  pm_api_url          = \"https://proxmox.example.com:8006/api2/json\"\n  pm_api_token_id     = \"your_username@pam!terraform\"\n  pm_api_token_secret = \"your_api_token_here\"\n  pm_tls_insecure     = true\n}\n</code></pre> <p>Warning: Never hardcode credentials. Use environment variables instead:</p> <pre><code>export PM_API_TOKEN_ID=\"your_username@pam!terraform\"\nexport PM_API_TOKEN_SECRET=\"your_api_token_here\"\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#vm-resource-example","title":"VM Resource Example","text":"<pre><code>resource \"proxmox_vm_qemu\" \"vm\" {\n  name        = \"terraform-vm\"\n  target_node = \"pve\"\n  clone       = \"ubuntu-template\"\n  cores       = 2\n  memory      = 2048\n\n  disk {\n    storage = \"local-lvm\"\n    size    = \"20G\"\n    type    = \"scsi\"\n  }\n\n  network {\n    model  = \"virtio\"\n    bridge = \"vmbr0\"\n  }\n}\n</code></pre>","tags":["DevOps","Terraform"]},{"location":"setup_terraform/#best-practices","title":"Best Practices","text":"<ul> <li>Store state remotely (Terraform Cloud, S3, Consul)</li> <li>Use <code>.tfvars</code> files for environment-specific values</li> <li>Never commit credentials or <code>.tfstate</code> files to git</li> <li>Add to <code>.gitignore</code>: <pre><code>*.tfstate\n*.tfstate.backup\n.terraform/\n*.tfvars\n</code></pre></li> </ul>","tags":["DevOps","Terraform"]},{"location":"setup_user/","title":"User Management","text":"","tags":["Linux"]},{"location":"setup_user/#linux-user-management","title":"Linux User Management","text":"<p>A guide covering user creation, password management, sudo configuration, and non-root Docker patterns.</p>","tags":["Linux"]},{"location":"setup_user/#creating-users","title":"Creating Users","text":"","tags":["Linux"]},{"location":"setup_user/#basic-user-creation","title":"Basic User Creation","text":"<pre><code># Create a user with home directory and bash shell\nsudo useradd -m -s /bin/bash your_username\n\n# Create a user with specific primary and supplementary groups\nsudo useradd -g primary_group -G adm,docker,sudo -s /bin/bash your_username\n</code></pre> <p>Flags explained:</p> Flag Description <code>-m</code> Create home directory <code>-s /bin/bash</code> Set login shell <code>-g group</code> Set primary group <code>-G grp1,grp2</code> Set supplementary groups <code>-u 1001</code> Set specific UID <code>-d /home/user</code> Set custom home directory","tags":["Linux"]},{"location":"setup_user/#interactive-user-creation","title":"Interactive User Creation","text":"<pre><code># Creates user interactively (prompts for password, info)\nsudo adduser your_username\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#password-management","title":"Password Management","text":"<pre><code># Change another user's password (as root/sudo)\nsudo passwd your_username\n\n# Force password change on next login\nsudo passwd -e your_username\n\n# Lock / unlock a user account\nsudo passwd -l your_username\nsudo passwd -u your_username\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#shell-management","title":"Shell Management","text":"<pre><code># Change user's shell\nsudo chsh -s /bin/bash your_username\n\n# List available shells\ncat /etc/shells\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#sudo-configuration","title":"Sudo Configuration","text":"","tags":["Linux"]},{"location":"setup_user/#add-user-to-sudo-group","title":"Add User to Sudo Group","text":"<pre><code># Add user to sudo group (Debian/Ubuntu)\nsudo usermod -aG sudo your_username\n\n# Add user to wheel group (RHEL/CentOS)\nsudo usermod -aG wheel your_username\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#passwordless-sudo","title":"Passwordless Sudo","text":"<pre><code># Create a sudoers drop-in file\necho \"your_username ALL=(ALL) NOPASSWD:ALL\" | sudo tee /etc/sudoers.d/your_username\nsudo chmod 0440 /etc/sudoers.d/your_username\n</code></pre> <p>Warning: Passwordless sudo should only be used in development or automated environments. Always require passwords in production.</p>","tags":["Linux"]},{"location":"setup_user/#validate-sudoers-syntax","title":"Validate Sudoers Syntax","text":"<pre><code>sudo visudo -c\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#group-management","title":"Group Management","text":"<pre><code># Create a new group\nsudo groupadd mygroup\n\n# Add user to a group\nsudo usermod -aG mygroup your_username\n\n# List user's groups\ngroups your_username\nid your_username\n\n# Remove user from a group\nsudo gpasswd -d your_username mygroup\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#non-root-docker-patterns","title":"Non-Root Docker Patterns","text":"<p>Running containers as non-root improves security. Below are common patterns.</p>","tags":["Linux"]},{"location":"setup_user/#set-user-in-docker-composeyml","title":"Set User in docker-compose.yml","text":"<pre><code>services:\n  app:\n    image: your_image:latest\n    user: \"1000:1000\"\n    volumes:\n      - ./data:/app/data\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#pre-create-directories-with-correct-ownership","title":"Pre-Create Directories with Correct Ownership","text":"<pre><code>mkdir -p ./data\nchown -R 1000:1000 ./data\n</code></pre>","tags":["Linux"]},{"location":"setup_user/#custom-entrypoint-for-permission-handling","title":"Custom Entrypoint for Permission Handling","text":"<p>Dockerfile: </p><pre><code>FROM node:20-slim\n\n# Create non-root user\nRUN groupadd -g 1000 appuser &amp;&amp; \\\n    useradd -u 1000 -g appuser -m appuser\n\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"node\", \"app.js\"]\n</code></pre><p></p> <p>entrypoint.sh: </p><pre><code>#!/bin/bash\n# Ensure data directory has correct ownership\nmkdir -p /app/data\nchown -R 1000:1000 /app/data\n\nexec \"$@\"\n</code></pre><p></p>","tags":["Linux"]},{"location":"setup_user/#best-practices","title":"Best Practices","text":"<ul> <li>Always specify <code>USER</code> in Dockerfile when possible</li> <li>Map container UID/GID to a host user for volume mounts</li> <li>Create required directories on the host before starting containers</li> <li>Use <code>gosu</code> or <code>su-exec</code> for privilege dropping in entrypoints</li> </ul>","tags":["Linux"]},{"location":"setup_vps/","title":"VPS Setup","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#complete-configuration-guide-for-ubuntu-2404-lts-arm64-vps-server","title":"Complete Configuration Guide for Ubuntu 24.04 LTS ARM64 VPS Server","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#set-the-timezone-to-warsaw","title":"Set the Timezone to Warsaw","text":"<pre><code>sudo timedatectl set-timezone Europe/Warsaw\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#minimize-the-installation","title":"Minimize the Installation","text":"<pre><code>sudo unminimize\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#install-git-and-github-cli","title":"Install Git and GitHub CLI","text":"<pre><code>sudo apt-get update\nsudo apt-get install git gh -y\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#add-a-new-user-and-grant-sudo-privileges","title":"Add a New User and Grant Sudo Privileges","text":"<p>Replace <code>your_username</code> with your desired username. </p><pre><code>sudo adduser your_username\nsudo usermod -aG sudo your_username\n</code></pre><p></p>","tags":["Linux","VPS"]},{"location":"setup_vps/#add-no-password-sudo-access-for-the-new-user","title":"Add no password sudo access for the new user","text":"<pre><code>echo \"your_username ALL=(ALL) NOPASSWD:ALL\" | sudo tee /etc/sudoers.d/your_username\nsudo chmod 0440 /etc/sudoers.d/your_username\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#set-up-ssh-keys-for-the-new-user","title":"Set Up SSH Keys for the New User","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#1-create-the-ssh-directory","title":"1. Create the <code>.ssh</code> Directory","text":"<pre><code>mkdir -p ~/.ssh\ncd ~/.ssh\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#2-generate-an-ssh-key-pair","title":"2. Generate an SSH Key Pair","text":"<pre><code>ssh-keygen -b 4096 -t rsa -f my-server-key\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#3-add-the-public-key-to-authorized_keys","title":"3. Add the Public Key to <code>authorized_keys</code>","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#method-1-append-the-key","title":"Method 1: Append the Key","text":"<pre><code>cat ~/.ssh/my-server-key.pub &gt;&gt; ~/.ssh/authorized_keys\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#4-set-permissions","title":"4. Set Permissions","text":"<pre><code>chmod 600 ~/.ssh/authorized_keys\nchmod 700 ~/.ssh\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#5-install-putty-tools","title":"5. Install <code>putty-tools</code>","text":"<pre><code>sudo apt install putty-tools\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#6-convert-the-private-key-to-ppk-format","title":"6. Convert the Private Key to PPK Format","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#puttygen-my-server-key-o-sshmy-server-keyppk","title":"<pre><code>puttygen ~/my-server-key -o ~/.ssh/my-server-key.ppk\n</code></pre>","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#chicken-and-egg-problem-with-ssh-keys","title":"Chicken and Egg Problem with SSH Keys","text":"<p>Now we need to copy the keys to local machine, and we have three options:</p>","tags":["Linux","VPS"]},{"location":"setup_vps/#option-1-use-scp-if-password-authentication-is-enabled","title":"Option 1: Use <code>scp</code> (if password authentication is enabled)","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#for-windows-powershell","title":"For Windows (PowerShell):","text":"<pre><code>scp your_user@server_address:~/.ssh/my-server-key C:\\Users\\YourUser\\Downloads\\\nscp your_user@server_address:~/.ssh/my-server-key.pub C:\\Users\\YourUser\\Downloads\\\nscp your_user@server_address:~/.ssh/my-server-key.ppk C:\\Users\\YourUser\\Downloads\\\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#for-linuxmacos","title":"For Linux/macOS:","text":"<pre><code>scp your_user@server_address:~/.ssh/my-server-key ~/Downloads/\nscp your_user@server_address:~/.ssh/my-server-key.pub ~/Downloads/\nscp your_user@server_address:~/.ssh/my-server-key.ppk ~/Downloads/\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#alternative-use-ssh-copy-id","title":"Alternative: Use <code>ssh-copy-id</code>","text":"<p>If you have password authentication to the server, you can use <code>ssh-copy-id</code> to copy the public key to the server. This will allow you to log in without a password. But you need to generate the keys first on local machine and copy them to the server. </p><pre><code>ssh-copy-id -i ~/.ssh/my-server-key.pub your_user@server_address\n</code></pre><p></p>","tags":["Linux","VPS"]},{"location":"setup_vps/#option-2-copy-via-another-user-if-you-only-have-ssh-key-authentication","title":"Option 2: Copy via another user (if you only have SSH key authentication)","text":"","tags":["Linux","VPS"]},{"location":"setup_vps/#21-copy-keys-to-the-ubuntu-users-home-directory","title":"2.1 Copy Keys to the <code>ubuntu</code> User's Home Directory","text":"<pre><code>sudo cp my-server-key /home/ubuntu/\nsudo cp my-server-key.pub /home/ubuntu/\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#22-change-ownership-and-permissions-of-the-keys","title":"2.2 Change Ownership and Permissions of the Keys","text":"<pre><code>sudo chown ubuntu:ubuntu /home/ubuntu/my-server-key\nsudo chown ubuntu:ubuntu /home/ubuntu/my-server-key.pub\nsudo chmod 600 /home/ubuntu/my-server-key\nsudo chmod 644 /home/ubuntu/my-server-key.pub\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#option-3-manual-copy-paste","title":"Option 3: Manual Copy-Paste","text":"<p>Just use \"cat\" command to show private and public keys, copy and save it to your local machine: </p><pre><code>cat ~/.ssh/my-server-key.pub\ncat ~/.ssh/my-server-key\n</code></pre><p></p>","tags":["Linux","VPS"]},{"location":"setup_vps/#bonus","title":"BONUS","text":"<p>If You want to block root login and password authentication, you can do it with the following command: </p><pre><code>sudo sed -i 's/^#PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config &amp;&amp; sudo sed -i 's/^PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config &amp;&amp; sudo systemctl restart sshd\n</code></pre> If you want to allow password authentication for the new user, you can do it with the following command: <pre><code>sudo sed -i 's/^PermitRootLogin no/PermitRootLogin yes/' /etc/ssh/sshd_config &amp;&amp; sudo sed -i 's/^PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config &amp;&amp; sudo systemctl restart sshd\n</code></pre> When You have password authentication enabled, you can use the following command to connect to the server, make directory and copy the public key to the server: <pre><code>ssh u\u017cytkownik@adres_serwera -p port \"mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh\" &amp;&amp; scp -P port ~/.ssh/lokalizacja/klucz.pub u\u017cytkownik@adres_serwera:~/.ssh/authorized_keys\n</code></pre><p></p>","tags":["Linux","VPS"]},{"location":"setup_vps/#github-authentication","title":"GitHub Authentication","text":"<pre><code>gh auth login\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#set-global-git-configurations","title":"Set Global Git Configurations","text":"<pre><code>git config --global user.name \"Your Name\"\ngit config --global user.email \"user@example.com\"\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#update-upgrade-and-clean-the-system","title":"Update, Upgrade, and Clean the System","text":"<pre><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y\nsudo apt-get dist-upgrade -y\nsudo apt-get autoremove -y\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#install-comprehensive-tools","title":"Install Comprehensive Tools","text":"<pre><code>sudo apt update &amp;&amp; sudo apt install mc nano net-tools iputils-ping curl wget git htop tcpdump traceroute vim zip unzip neofetch ncat cifs-utils bash-completion hstr -y\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#install-crowdsec-for-system-protection","title":"Install CrowdSec for System Protection","text":"<pre><code>curl -s https://install.crowdsec.net | sudo sh\nsudo apt install crowdsec\nsudo apt install crowdsec-firewall-bouncer-iptables\nsudo systemctl restart crowdsec\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#install-docker","title":"Install Docker","text":"<pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#add-current-user-to-docker-group-and-refresh-group-membership","title":"Add Current User to Docker Group and Refresh Group Membership","text":"<pre><code>sudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#test-docker-installation","title":"Test Docker Installation","text":"<pre><code>sudo docker run hello-world\n</code></pre>","tags":["Linux","VPS"]},{"location":"setup_vps/#run-portainer","title":"Run Portainer","text":"<pre><code>docker volume create portainer_data\ndocker run -d -p 8000:8000 -p 9443:9443 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest\n</code></pre>","tags":["Linux","VPS"]},{"location":"support/","title":"Support","text":""},{"location":"support/#support-donate","title":"Support / Donate","text":"<p>If you'd like to support my work, you can do so via:</p> <p></p> <p>Your support helps me continue developing documentation and tools.</p>"},{"location":"tags/","title":"Tags","text":""},{"location":"tags/#tags","title":"Tags","text":""},{"location":"tags/#tag:ansible","title":"Ansible","text":"<ul> <li>            Ansible          </li> </ul>"},{"location":"tags/#tag:cloud","title":"Cloud","text":"<ul> <li>            Cloud-Init          </li> </ul>"},{"location":"tags/#tag:devops","title":"DevOps","text":"<ul> <li>            Ansible          </li> <li>            Jenkins          </li> <li>            Packer          </li> <li>            Terraform          </li> </ul>"},{"location":"tags/#tag:docker","title":"Docker","text":"<ul> <li>            Best Practices          </li> <li>            Docker Rootless          </li> <li>            Docker Swarm          </li> <li>            Docker on Debian          </li> <li>            Docker on RHEL          </li> <li>            Docker on Ubuntu          </li> <li>            Docker on WSL          </li> <li>            Post-Installation          </li> </ul>"},{"location":"tags/#tag:gpu","title":"GPU","text":"<ul> <li>            LLM &amp; GPU          </li> </ul>"},{"location":"tags/#tag:jenkins","title":"Jenkins","text":"<ul> <li>            Jenkins          </li> </ul>"},{"location":"tags/#tag:kubernetes","title":"Kubernetes","text":"<ul> <li>            Kubernetes (K3s)          </li> </ul>"},{"location":"tags/#tag:llm","title":"LLM","text":"<ul> <li>            LLM &amp; GPU          </li> </ul>"},{"location":"tags/#tag:linux","title":"Linux","text":"<ul> <li>            Linux Essentials          </li> <li>            SSH Keys          </li> <li>            User Management          </li> <li>            VPS Setup          </li> </ul>"},{"location":"tags/#tag:packer","title":"Packer","text":"<ul> <li>            Packer          </li> </ul>"},{"location":"tags/#tag:proxmox","title":"Proxmox","text":"<ul> <li>            Proxmox VE          </li> </ul>"},{"location":"tags/#tag:ssh","title":"SSH","text":"<ul> <li>            SSH Keys          </li> </ul>"},{"location":"tags/#tag:security","title":"Security","text":"<ul> <li>            CrowdSec          </li> <li>            Tailscale          </li> </ul>"},{"location":"tags/#tag:swarm","title":"Swarm","text":"<ul> <li>            Docker Swarm          </li> </ul>"},{"location":"tags/#tag:terraform","title":"Terraform","text":"<ul> <li>            Terraform          </li> </ul>"},{"location":"tags/#tag:vpn","title":"VPN","text":"<ul> <li>            Tailscale          </li> </ul>"},{"location":"tags/#tag:vps","title":"VPS","text":"<ul> <li>            VPS Setup          </li> </ul>"},{"location":"containers/","title":"Containers","text":""},{"location":"containers/#containers","title":"Containers","text":"<p>Docker installation, configuration, orchestration with Swarm and Kubernetes.</p> <ul> <li> <p> Docker on Ubuntu</p> <p>Install and configure Docker Engine on Ubuntu systems.</p> <p> Read guide</p> </li> <li> <p> Docker on Debian</p> <p>Install and configure Docker Engine on Debian systems.</p> <p> Read guide</p> </li> <li> <p> Docker on RHEL</p> <p>Install and configure Docker Engine on Red Hat Enterprise Linux.</p> <p> Read guide</p> </li> <li> <p> Docker Rootless</p> <p>Run Docker daemon without root privileges for enhanced security.</p> <p> Read guide</p> </li> <li> <p> Docker on WSL</p> <p>Set up Docker with Windows Subsystem for Linux.</p> <p> Read guide</p> </li> <li> <p> Post-Installation</p> <p>Configure Docker after installation: permissions, storage, networking.</p> <p> Read guide</p> </li> <li> <p> Best Practices</p> <p>Docker best practices for images, containers, and production deployments.</p> <p> Read guide</p> </li> <li> <p> Docker Swarm</p> <p>Set up and manage a Docker Swarm cluster for container orchestration.</p> <p> Read guide</p> </li> <li> <p> Kubernetes (K3s)</p> <p>Deploy lightweight Kubernetes cluster with K3s.</p> <p> Read guide</p> </li> </ul>"},{"location":"devops/","title":"DevOps","text":""},{"location":"devops/#devops","title":"DevOps","text":"<p>Infrastructure as Code, configuration management, and CI/CD pipelines.</p> <ul> <li> <p> Terraform</p> <p>Provision and manage infrastructure with Terraform IaC.</p> <p> Read guide</p> </li> <li> <p> Ansible</p> <p>Automate configuration management and application deployment.</p> <p> Read guide</p> </li> <li> <p> Packer</p> <p>Build automated machine images for multiple platforms.</p> <p> Read guide</p> </li> <li> <p> Jenkins</p> <p>Set up Jenkins CI/CD server for automated build and deployment pipelines.</p> <p> Read guide</p> </li> </ul>"},{"location":"infrastructure/","title":"Infrastructure","text":""},{"location":"infrastructure/#infrastructure","title":"Infrastructure","text":"<p>Virtualization, cloud provisioning, and GPU-accelerated workloads.</p> <ul> <li> <p> Proxmox VE</p> <p>Install and configure Proxmox Virtual Environment for homelab virtualization.</p> <p> Read guide</p> </li> <li> <p> Cloud-Init</p> <p>Automate VM provisioning with Cloud-Init templates.</p> <p> Read guide</p> </li> <li> <p> LLM &amp; GPU</p> <p>Set up local LLM inference with GPU passthrough and acceleration.</p> <p> Read guide</p> </li> </ul>"},{"location":"linux/","title":"Linux","text":""},{"location":"linux/#linux","title":"Linux","text":"<p>System administration, SSH configuration, user management, and VPS setup.</p> <ul> <li> <p> Linux Essentials</p> <p>System updates, package management, essential tools and configurations.</p> <p> Read guide</p> </li> <li> <p> SSH Keys</p> <p>Generate, configure, and manage SSH keys for secure remote access.</p> <p> Read guide</p> </li> <li> <p> User Management</p> <p>Create users, configure sudo privileges, and manage permissions.</p> <p> Read guide</p> </li> <li> <p> VPS Setup</p> <p>Full Ubuntu 24.04 ARM64 server configuration from scratch.</p> <p> Read guide</p> </li> </ul>"},{"location":"security/","title":"Security","text":""},{"location":"security/#security","title":"Security","text":"<p>Intrusion prevention, network security, and secure remote access.</p> <ul> <li> <p> CrowdSec</p> <p>Deploy collaborative intrusion prevention with CrowdSec.</p> <p> Read guide</p> </li> <li> <p> Tailscale</p> <p>Set up zero-config WireGuard VPN mesh network with Tailscale.</p> <p> Read guide</p> </li> </ul>"}]}